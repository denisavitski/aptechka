"use strict";var Ct=(i,e,s)=>{if(!e.has(i))throw TypeError("Cannot "+s)};var h=(i,e,s)=>(Ct(i,e,"read from private field"),s?s.call(i):e.get(i)),T=(i,e,s)=>{if(e.has(i))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(i):e.set(i,s)},R=(i,e,s,r)=>(Ct(i,e,"write to private field"),r?r.call(i,s):e.set(i,s),s);Object.defineProperty(exports,Symbol.toStringTag,{value:"Module"});const $t=require("../Damped-BvkThM-2.cjs"),Tt=require("../Store-D0_rDIsE.cjs"),Dt=require("../Derived-SjPdLJiZ.cjs"),Pt=require("../browser-CpzFX2xg.cjs"),H=require("../layout-8ryRAMGJ.cjs"),zt=require("../math-GDWEqu7y.cjs");require("../ticker/index.cjs");const x=require("../attribute/index.cjs"),At=require("../WheelControls-CctFwJwY.cjs"),wt=require("../custom-element/index.cjs"),yt=require("../order/index.cjs"),dt=require("../window-resizer/index.cjs"),B=require("../scroll-entries/index.cjs"),V=require("../tags-DX-eNxbA.cjs"),Lt=require("../createStylesheet-C0OnN0Br.cjs"),It=require("../css-unit-parser/index.cjs"),Ht=require("../dom-qY2LdCVL.cjs");var Bt=Object.defineProperty,Ft=Object.getOwnPropertyDescriptor,Ut=(i,e,s,r)=>{for(var n=r>1?void 0:r?Ft(e,s):e,p=i.length-1,f;p>=0;p--)(f=i[p])&&(n=(r?f(e,s,n):f(n))||n);return r&&n&&Bt(e,s,n),n},kt=(i,e,s)=>{if(!e.has(i))throw TypeError("Cannot "+s)},t=(i,e,s)=>(kt(i,e,"read from private field"),s?s.call(i):e.get(i)),l=(i,e,s)=>{if(e.has(i))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(i):e.set(i,s)},g=(i,e,s,r)=>(kt(i,e,"write to private field"),r?r.call(i,s):e.set(i,s),s),m=(i,e,s)=>(kt(i,e,"access private method"),s),a,C,D,q,I,j,y,G,tt,et,u,ft,c,st,it,S,d,z,k,F,w,K,O,N,gt,U,Q,mt,Wt,bt,Mt,rt,St,nt,_t,$,vt,Et,Rt,ht,lt,xt,_,b,L,W;class Gt{constructor(e,s){T(this,_,void 0);T(this,b,void 0);T(this,L,0);T(this,W,0);R(this,_,e),R(this,b,s),B.scrollEntries.register(h(this,_))}get size(){return h(this,L)}get position(){return h(this,W)}destroy(){B.scrollEntries.unregister(h(this,_)),h(this,_).style.transform=""}resize(){R(this,L,h(this,b).vertical?h(this,_).offsetHeight:h(this,_).offsetWidth),R(this,W,h(this,b).vertical?H.getCumulativeOffsetTop(h(this,_)):H.getCumulativeOffsetLeft(h(this,_))),R(this,W,h(this,W)-h(this,b).contentPosition)}transform(){let e=0;const s=h(this,b).viewportSize-h(this,L);h(this,b).infiniteAttribute.current&&h(this,b).overscroll&&h(this,W)+h(this,L)<h(this,b).currentScrollValue&&(e=h(this,b).distance*-1-h(this,b).gap),B.scrollEntries.update(h(this,_),h(this,b).axisAttibute.current,e);const r=h(this,b).currentScrollValue+e,n=h(this,W)-h(this,b).viewportSize-s,p=h(this,W)+h(this,L)+s,f=zt.clamp(r,n,p);h(this,b).vertical?h(this,_).style.transform=`translate3d(0px, ${f*-1}px, 0px)`:h(this,_).style.transform=`translate3d(${f*-1}px, 0px, 0px)`}}_=new WeakMap,b=new WeakMap,L=new WeakMap,W=new WeakMap;const Kt=Lt.createStylesheet({":host":{position:"relative",width:"100%",height:"100%",display:"block",outline:"none"},':host([hibernated="true"])':{display:"contents"},".static":{position:"absolute",top:"0",left:"0",width:"100%",height:"100%"},".content":{position:"relative",display:"flex",width:"100%",height:"100%",gap:"var(--gap, 0px)"},':host([hibernated="true"]) .content':{display:"contents"},"::slotted(*)":{flexShrink:"0"}});exports.ScrollElement=class extends wt.CustomElement{constructor(){super(),l(this,N),l(this,U),l(this,mt),l(this,bt),l(this,rt),l(this,nt),l(this,Et),l(this,lt),l(this,a,null),l(this,C,new x.Attribute(this,"axis","y")),l(this,D,new x.Attribute(this,"pages",0,{validate:e=>Math.max(0,e-1)})),l(this,q,new x.Attribute(this,"split",!1)),l(this,I,new x.Attribute(this,"sectional",!1)),l(this,j,new x.Attribute(this,"wheel-max-delta",!1)),l(this,y,new x.Attribute(this,"infinite",!1)),l(this,G,new x.Attribute(this,"damping",.03)),l(this,tt,new x.Attribute(this,"disabled",!1)),l(this,et,new x.Attribute(this,"hibernated",!1)),l(this,u,null),l(this,ft,null),l(this,c,[]),l(this,st,0),l(this,it,0),l(this,S,0),l(this,d,0),l(this,z,0),l(this,k,null),l(this,F,null),l(this,w,new Tt.Store(0)),l(this,K,0),l(this,O,0),l(this,$,()=>{const e=this.currentScrollValue/t(this,d)||0;if(g(this,st,this.vertical?H.getCumulativeOffsetTop(this):H.getCumulativeOffsetLeft(this)),g(this,it,this.vertical?H.getCumulativeOffsetTop(t(this,u)):H.getCumulativeOffsetLeft(t(this,u))),g(this,S,this.vertical?this.offsetHeight:this.offsetWidth),t(this,D).current){g(this,d,t(this,S)*t(this,D).current);const s=t(this,d)+t(this,S);this.vertical?(t(this,u).style.width=s+"px",t(this,u).style.height="100%"):(t(this,u).style.height=s+"px",t(this,u).style.width="100%")}else this.vertical?(t(this,u).style.width="100%",t(this,u).style.height="max-content",g(this,d,t(this,u).offsetHeight-t(this,S))):(t(this,u).style.width="max-content",t(this,u).style.height="100%",g(this,d,t(this,u).offsetWidth-t(this,S)));if(g(this,z,It.cssUnitParser.parse(getComputedStyle(t(this,u)).gap)),!t(this,y).current){const s=getComputedStyle(this);g(this,d,t(this,d)+(this.vertical?parseFloat(s.paddingBlockStart)+parseFloat(s.paddingBlockEnd):parseFloat(s.paddingInlineStart)+parseFloat(s.paddingInlineEnd))),t(this,a).max=t(this,d)}if(t(this,c).forEach(s=>{s.resize(),s.transform()}),t(this,y).current&&t(this,c).length){const s=t(this,c)[t(this,c).length-1],r=s.position+s.size-t(this,S),n=t(this,d)-r;g(this,O,s.position+s.size+n)}else g(this,O,t(this,d));if(t(this,I).current&&t(this,c).length){const s=t(this,c)[t(this,w).current];t(this,a).set(s.position,!0)}else t(this,a).set(e*t(this,d),!0)}),l(this,vt,()=>{const e=this.currentScrollValue;if(g(this,K,Math.max(0,e-t(this,d))),t(this,c).length){let s=0;for(let r=0;r<t(this,c).length;r++){const n=t(this,c)[r];n.transform(),this.targetScrollValue+this.viewportSize/2>=n.position&&(s=r)}t(this,w).current=s}else this.vertical?t(this,u).style.transform=`translate3d(0px, ${e*-1}px, 0px)`:t(this,u).style.transform=`translate3d(${e*-1}px, 0px, 0px)`;B.scrollEntries.update(this,t(this,C).current,e)}),l(this,ht,e=>{if(typeof e=="number")if(t(this,I).current){const s=Math.sign(e);t(this,c).length?this.shiftSections(s):t(this,a).shift(s*t(this,S))}else t(this,a).shift(e);else e==="min"?t(this,a).set(t(this,a).min):e==="max"&&t(this,a).set(t(this,a).length)}),Pt.isBrowser&&(g(this,a,new $t.Damped(0,{damping:.01,min:0,order:yt.TICK_ORDER.SCROLL})),this.openShadow(Kt),V.element(this,{tabIndex:0,children:[V.div({class:"static",children:[V.slot({name:"static"})]}),V.div({class:"content",children:[V.slot({ref:e=>g(this,ft,e)})],style:{flexDirection:new Dt.Derived(t(this,C),e=>e==="x"?"row":"column")},ref:e=>g(this,u,e)})]}),g(this,k,new At.WheelControls({element:this})),t(this,k).changeEvent.subscribe(t(this,ht)),g(this,F,new At.KeyboardControls({element:this})),t(this,F).changeEvent.subscribe(t(this,ht)),t(this,C).subscribe(({current:e})=>{t(this,u).style.flexDirection=e==="x"?"row":"column",t(this,k).axis=t(this,j).current?"max":e,this.isConnected&&t(this,$).call(this)}),t(this,j).subscribe(e=>{t(this,k).axis=e.current?"max":t(this,C).current}),t(this,D).subscribe(()=>{this.isConnected&&t(this,$).call(this)}),t(this,q).subscribe(({current:e})=>{this.isConnected&&(e?m(this,N,gt).call(this):m(this,U,Q).call(this))}),t(this,I).subscribe(e=>{t(this,w).current=0,t(this,k).debounce=e.current,t(this,a).reset(),this.isConnected&&(e.current&&!e.previous?m(this,N,gt).call(this):!e.current&&e.previous&&m(this,U,Q).call(this))}),t(this,y).subscribe(e=>{e.current?(this.isConnected&&(t(this,c).length||(t(this,q).current=!0)),t(this,c).length&&(t(this,a).max=1/0,t(this,a).min=-1/0)):(g(this,K,0),t(this,a).max=t(this,d),t(this,a).min=0)}),t(this,G).subscribe(e=>{t(this,a).damping=e.current}),t(this,tt).subscribe(e=>{e.current&&!e.previous?m(this,mt,Wt).call(this):!e.current&&e.previous&&m(this,bt,Mt).call(this)}),t(this,et).subscribe(e=>{e.current&&!e.previous?m(this,rt,St).call(this):!e.current&&e.previous&&m(this,nt,_t).call(this)}))}get dampingAttribute(){return t(this,G)}get axisAttibute(){return t(this,C)}get pagesAttibute(){return t(this,D)}get splitAttibute(){return t(this,q)}get sectionalAttibute(){return t(this,I)}get infiniteAttribute(){return t(this,y)}get dampingAttibute(){return t(this,G)}get disabledAttibute(){return t(this,tt)}get hibernatedAttibute(){return t(this,et)}get currentScrollValue(){return m(this,lt,xt).call(this,"current")}get targetScrollValue(){return m(this,lt,xt).call(this,"target")}get contentElement(){return t(this,u)}get position(){return t(this,st)}get contentPosition(){return t(this,it)}get viewportSize(){return t(this,S)}get scrollSize(){return t(this,d)}get gap(){return t(this,z)}get counter(){return t(this,w)}get distance(){return t(this,O)}get overscroll(){return t(this,K)}get vertical(){return t(this,C).current==="y"}get currentProgress(){return this.currentScrollValue/t(this,O)||0}get targetProgress(){return this.targetScrollValue/t(this,O)||0}get speed(){return t(this,a).speed}get direction(){return t(this,a).direction}get isRunning(){return t(this,a).isRunning}onScroll(...e){return t(this,a).subscribe(...e)}offScroll(...e){t(this,a).unsubscribe(...e)}get context(){return{currentScrollValue:this.currentScrollValue,targetScrollValue:this.targetScrollValue,contentElement:this.contentElement,position:this.position,contentPosition:this.contentPosition,viewportSize:this.viewportSize,scrollSize:this.scrollSize,gap:this.gap,counter:this.counter,distance:this.distance,overscroll:this.overscroll,vertical:this.vertical,currentProgress:this.currentProgress,targetProgress:this.targetProgress,speed:this.speed,direction:this.direction,isRunning:this.isRunning,range:this.range,curve:this.curve,visible:this.visible}}range(e,s,r=0){const n=e-r,p=n+s+r*2;return this.currentProgress<n?0:this.currentProgress>p?1:(this.currentProgress-n)/(p-n)}curve(e,s,r=0){return Math.sin(this.range(e,s,r)*Math.PI)}visible(e,s,r=0){const n=e-r,p=n+s+r*2;return this.currentProgress>=n&&this.currentProgress<=p}scrollToSection(e,s="smooth"){if(!t(this,c).length)return;const r=t(this,w).current;m(this,Et,Rt).call(this,e);const n=t(this,c)[r],p=t(this,c)[t(this,w).current];if(n&&p){let f=0;const Y=t(this,c).length-1;t(this,y).current?t(this,w).current===0&&r===Y?f=t(this,d)+t(this,S)-n.position+t(this,z):t(this,w).current===Y&&r===0?f=p.position-(t(this,d)+t(this,S)+t(this,z)):f=p.position-n.position:f=p.position-n.position,t(this,a).shift(f,s==="instant")}}shiftSections(e,s="smooth"){t(this,c).length&&this.scrollToSection(t(this,w).current+e,s)}setPosition(e,s="smooth"){t(this,a).set(e,s==="instant")}connectedCallback(){m(this,nt,_t).call(this)}disconnectedCallback(){m(this,rt,St).call(this)}};a=new WeakMap;C=new WeakMap;D=new WeakMap;q=new WeakMap;I=new WeakMap;j=new WeakMap;y=new WeakMap;G=new WeakMap;tt=new WeakMap;et=new WeakMap;u=new WeakMap;ft=new WeakMap;c=new WeakMap;st=new WeakMap;it=new WeakMap;S=new WeakMap;d=new WeakMap;z=new WeakMap;k=new WeakMap;F=new WeakMap;w=new WeakMap;K=new WeakMap;O=new WeakMap;N=new WeakSet;gt=function(){m(this,U,Q).call(this),t(this,ft).assignedElements().forEach(i=>{i instanceof HTMLElement&&t(this,c).push(new Gt(i,this))}),t(this,u).style.transform="",t(this,$).call(this)};U=new WeakSet;Q=function(){t(this,c).forEach(i=>{i.destroy()}),g(this,c,[])};mt=new WeakSet;Wt=function(){t(this,a).unsubscribe(t(this,vt)),t(this,a).stopAnimation(),t(this,k).disconnect(),t(this,F).disconnect()};bt=new WeakSet;Mt=function(){t(this,a).subscribe(t(this,vt)),t(this,k).connect(),t(this,F).connect()};rt=new WeakSet;St=function(){dt.windowResizer.unsubscribe(t(this,$)),t(this,a).reset(),m(this,mt,Wt).call(this),t(this,u).style.transform="",t(this,q).current&&m(this,U,Q).call(this),B.scrollEntries.unregister(this)};nt=new WeakSet;_t=function(){t(this,q).current&&m(this,N,gt).call(this),B.scrollEntries.register(this),dt.windowResizer.subscribe(t(this,$),yt.RESIZE_ORDER.SCROLL),m(this,bt,Mt).call(this)};$=new WeakMap;vt=new WeakMap;Et=new WeakSet;Rt=function(i){t(this,y).current?(t(this,w).current=i%t(this,c).length,t(this,w).current=t(this,w).current<0?t(this,c).length+t(this,w).current:t(this,w).current):t(this,w).current=zt.clamp(i,0,t(this,c).length-1)};ht=new WeakMap;lt=new WeakSet;xt=function(i="current"){if(t(this,y).current&&t(this,c).length){const e=t(this,a)[i]%(t(this,d)+t(this,S)+t(this,z));return e<0?t(this,d)+e+t(this,S)+t(this,z):e}else return t(this,a)[i]};exports.ScrollElement=Ut([wt.define("e-scroll")],exports.ScrollElement);var X;class Zt extends wt.CustomElement{constructor(){super(...arguments);T(this,X,null)}get scrollElement(){return h(this,X)}connectedCallback(){const s=Ht.findParentElement(this,exports.ScrollElement);s instanceof exports.ScrollElement?R(this,X,s):console.error(this,"e-scroll not found")}}X=new WeakMap;var Jt=Object.defineProperty,Nt=Object.getOwnPropertyDescriptor,Qt=(i,e,s,r)=>{for(var n=r>1?void 0:r?Nt(e,s):e,p=i.length-1,f;p>=0;p--)(f=i[p])&&(n=(r?f(e,s,n):f(n))||n);return r&&n&&Jt(e,s,n),n},Ot=(i,e,s)=>{if(!e.has(i))throw TypeError("Cannot "+s)},o=(i,e,s)=>(Ot(i,e,"read from private field"),s?s.call(i):e.get(i)),E=(i,e,s)=>{if(e.has(i))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(i):e.set(i,s)},M=(i,e,s,r)=>(Ot(i,e,"write to private field"),r?r.call(i,s):e.set(i,s),s),ot,v,A,P,Z,J,at,ct,ut,pt;const Xt=Lt.createStylesheet({":host":{display:"inline-block",zIndex:"1",backgroundColor:"#efefef"},':host([axis="y"])':{position:"absolute",right:"0",top:"0",width:"1vmin",height:"100%"},':host([axis="x"])':{position:"absolute",left:"0",bottom:"0",width:"100%",height:"1vmin"},".default-thumb":{backgroundColor:"#181818",borderRadius:"1vmin",touchAction:"none"},"::slotted(*)":{touchAction:"none"}});exports.ScrollbarElement=class extends Zt{constructor(){super(),E(this,ot,null),E(this,v,null),E(this,A,!1),E(this,P,0),E(this,Z,0),E(this,J,0),E(this,at,()=>{M(this,A,this.offsetWidth>this.offsetHeight);const e=o(this,A)?this.offsetWidth:this.offsetHeight;M(this,P,e/((this.scrollElement.scrollSize+this.scrollElement.viewportSize)/e)),M(this,P,Math.max(o(this,P),30)),o(this,A)?(o(this,v).style.width=o(this,P)+"px",o(this,v).style.height="100%"):(o(this,v).style.width="100%",o(this,v).style.height=o(this,P)+"px"),M(this,Z,e-o(this,P)),this.scrollElement.scrollSize||(this.style.display="none")}),E(this,ct,()=>{M(this,J,this.scrollElement.currentProgress*o(this,Z)),o(this,A)?o(this,v).style.transform=`translate3d(${o(this,J)}px, 0px, 0px)`:o(this,v).style.transform=`translate3d(0px, ${o(this,J)}px, 0px)`}),E(this,ut,()=>{this.setAttribute("axis",this.scrollElement.axisAttibute.current)}),E(this,pt,e=>{const s=f=>{const Y=o(this,A)?f.x:f.y,Vt=this.scrollElement.distance/o(this,Z),qt=(Y-p)*Vt;this.scrollElement.setPosition(n+qt)},r=()=>{removeEventListener("pointermove",s),removeEventListener("pointerup",r),removeEventListener("touchend",r)};addEventListener("pointermove",s),addEventListener("pointerup",r),addEventListener("touchend",r);const n=this.scrollElement.targetScrollValue,p=o(this,A)?e.x:e.y}),Pt.isBrowser&&(this.openShadow(Xt),V.element(this,{children:[V.slot({ref:e=>M(this,ot,e)})]}))}get thumbElement(){return o(this,v)}connectedCallback(){super.connectedCallback();const e=o(this,ot).assignedElements()[0];e instanceof HTMLElement?M(this,v,e):(M(this,v,document.createElement("div")),o(this,v).classList.add("default-thumb"),this.shadowRoot.appendChild(o(this,v))),o(this,v).addEventListener("pointerdown",o(this,pt)),dt.windowResizer.subscribe(o(this,at),yt.RESIZE_ORDER.SCROLL+1),this.scrollElement.onScroll(o(this,ct)),this.scrollElement.axisAttibute.subscribe(o(this,ut))}disconnectedCallback(){o(this,v).removeEventListener("pointerdown",o(this,pt)),dt.windowResizer.unsubscribe(o(this,at)),this.scrollElement.offScroll(o(this,ct)),this.scrollElement.axisAttibute.unsubscribe(o(this,ut))}};ot=new WeakMap;v=new WeakMap;A=new WeakMap;P=new WeakMap;Z=new WeakMap;J=new WeakMap;at=new WeakMap;ct=new WeakMap;ut=new WeakMap;pt=new WeakMap;exports.ScrollbarElement=Qt([wt.define("e-scrollbar")],exports.ScrollbarElement);
