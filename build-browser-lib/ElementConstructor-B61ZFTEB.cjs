"use strict";var $=(l,e,s)=>{if(!e.has(l))throw TypeError("Cannot "+s)};var n=(l,e,s)=>($(l,e,"read from private field"),s?s.call(l):e.get(l)),f=(l,e,s)=>{if(e.has(l))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(l):e.set(l,s)},Q=(l,e,s,t)=>($(l,e,"write to private field"),t?t.call(l,s):e.set(l,s),s);var a=(l,e,s)=>($(l,e,"access private method"),s);const m=require("./Store-D0_rDIsE.cjs"),fe=require("./browser-CpzFX2xg.cjs"),X=require("./object-BZELAoVj.cjs"),R=require("./string-vBu90jhV.cjs"),re=require("./connector/index.cjs"),ce=new Set(["animate","animateMotion","animateTransform","circle","clipPath","defs","desc","ellipse","feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","filter","foreignObject","g","image","line","linearGradient","listener","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialGradient","rect","set","solidColor","stop","svg","switch","symbol","text","textPath","title","tspan","view"]);var r,h,d,N,Z,w,_,A,O,S,z,M,j,x,ee,v,te,D,se,y,J,E,V,k,ie,q,ne,b,K,g,T,p,Y,H,oe,F,ae,C,I,L,U,P,B;const G=class G{constructor(...e){f(this,N);f(this,w);f(this,A);f(this,S);f(this,M);f(this,x);f(this,v);f(this,D);f(this,y);f(this,E);f(this,k);f(this,q);f(this,b);f(this,g);f(this,p);f(this,H);f(this,F);f(this,C);f(this,L);f(this,r,void 0);f(this,h,new Set);f(this,d,new Set);f(this,P,()=>{n(this,h).forEach(e=>{e()}),n(this,h).clear()});f(this,B,e=>{n(this,d).forEach(s=>{s(e)}),n(this,d).clear()});const s=e[0],t=e[1];Q(this,r,a(this,N,Z).call(this,s,t==null?void 0:t.forceSvg)),a(this,A,O).call(this,t)}get node(){return n(this,r)}};r=new WeakMap,h=new WeakMap,d=new WeakMap,N=new WeakSet,Z=function(e,s){let t=null;if(e instanceof Node)t=e;else if(typeof e=="string")if(!e.includes("<")&&e.includes("-"))t=new(customElements.get(e));else if(e.includes("<")){const i=document.createElement("div");i.innerHTML=e,t=i.firstElementChild}else ce.has(e)||s?t=document.createElementNS("http://www.w3.org/2000/svg",e):t=document.createElement(e);else t=document.createElement("div");return t},w=new WeakSet,_=function(e){return e instanceof HTMLElement||e instanceof SVGElement},A=new WeakSet,O=function(e){if(!e)return;const s=a(this,w,_).call(this,n(this,r)),t=e.ref;delete e.ref,e!=null&&e.onConnect&&(n(this,h).add(e.onConnect),delete e.onConnect),e!=null&&e.onDisconnect&&(n(this,d).add(e.onDisconnect),delete e.onDisconnect);let i,o;for(const c in e){const u=e[c];c==="class"&&s?a(this,S,z).call(this,u):c==="style"&&s?a(this,v,te).call(this,u):c==="lightChildren"?a(this,g,T).call(this,n(this,r),u):c==="children"?a(this,g,T).call(this,n(this,r)instanceof Element?n(this,r).shadowRoot||n(this,r):n(this,r),u):c.startsWith("on")?(o||(o={}),o[c]=u):(i||(i={}),i[c]=u)}if(a(this,q,ne).call(this,i),a(this,k,ie).call(this,o),t&&(typeof t=="function"?t(n(this,r)):t.current=n(this,r)),fe.isBrowser&&(n(this,d).size||n(this,h).size)){const c=n(this,r)instanceof DocumentFragment?n(this,r).firstChild:n(this,r);re.connector.subscribe(c,{connectCallback:n(this,P),disconnectCallback:n(this,B),unsubscribeAfterDisconnect:!0,maxWaitSec:20})}},S=new WeakSet,z=function(e){const s=n(this,r);if(e){if(typeof e=="string")s.classList.add(e);else if(Array.isArray(e))e.forEach(t=>{a(this,S,z).call(this,t)});else if(typeof e=="object")if(e instanceof m.Store)a(this,M,j).call(this,e);else for(const t in e){const i=e[t];i instanceof m.Store?a(this,x,ee).call(this,t,i):i?s.classList.add(t):s.classList.remove(t)}}else return},M=new WeakSet,j=function(e){const s=n(this,r);n(this,d).add(e.subscribe(({current:t,previous:i})=>{i&&[i].flat().forEach(o=>{o&&s.classList.remove(o)}),t&&[t].flat().forEach(o=>{o&&s.classList.add(o)})}))},x=new WeakSet,ee=function(e,s){const t=n(this,r);n(this,d).add(s.subscribe(({current:i})=>{i?t.classList.add(e):t.classList.remove(e)}))},v=new WeakSet,te=function(e){if(!e)return;const s=n(this,r);s.tagName==="style"||s.tagName==="STYLE"?a(this,y,J).call(this,e):a(this,D,se).call(this,e)},D=new WeakSet,se=function(e){for(const s in e){const t=s,i=e[t];i instanceof m.Store?n(this,d).add(i.subscribe(({current:o})=>{a(this,E,V).call(this,t,o)})):a(this,E,V).call(this,t,i)}},y=new WeakSet,J=function(e){const s=n(this,r);for(const t in e){const i=e[t];if(typeof i=="object"&&!(i instanceof m.Store))s.appendChild(new Text(`${t} {`)),a(this,y,J).call(this,i),s.appendChild(new Text("}"));else if(i instanceof m.Store){const o=new Text;n(this,d).add(i.subscribe(c=>{c.current?o.nodeValue=`${R.camelToKebab(t)}: ${c.current};`:o.nodeValue=""})),s.appendChild(o)}else s.appendChild(new Text(`${R.camelToKebab(t)}: ${i};`))}},E=new WeakSet,V=function(e,s){const t=n(this,r);e.includes("--")?s?t.style.setProperty(e,s):t.style.removeProperty(e):s?t.style[e]=s:t.style[e]=""},k=new WeakSet,ie=function(e){if(!e)return;const s=n(this,r);for(const t in e){const i=t,o=R.uncapitalize(i.split("on").slice(1).join("on")),c=e[i];typeof c=="object"?s.addEventListener(o,c.callback,c.options):typeof c=="function"&&s.addEventListener(o,c)}},q=new WeakSet,ne=function(e){for(const s in e){const t=e[s];t instanceof m.Store?n(this,d).add(t.subscribe(({current:i})=>{a(this,b,K).call(this,s,i)})):a(this,b,K).call(this,s,t)}},b=new WeakSet,K=function(e,s){var i,o;const t=n(this,r);e in t&&!((o=(i=t.constructor)==null?void 0:i.observedAttributes)!=null&&o.includes(e))?s!=null&&(t[e]=s.toString()):s!=null&&t.setAttribute(e,s.toString())},g=new WeakSet,T=function(e,s){s&&(s=[s].flat(),s.forEach(t=>{if(t instanceof m.Store){const i=document.createElement("div");i.style.display="contents",e.appendChild(i),n(this,d).add(t.subscribe(({current:o})=>{a(this,F,ae).call(this,i,a(this,H,oe).call(this,o),Array.from(i.childNodes))}))}else if(t instanceof G)a(this,p,Y).call(this,e,t.node);else if(t instanceof Function)a(this,g,T).call(this,e,X.isESClass(t)?new t:t());else{const i=a(this,L,U).call(this,t);i instanceof Node&&a(this,p,Y).call(this,e,i)}}))},p=new WeakSet,Y=function(e,s){!(e instanceof ShadowRoot)&&s instanceof HTMLElement&&s.tagName==="STYLE"?(n(this,h).add(()=>{[...document.head.querySelectorAll("style")].find(i=>i.outerHTML===s.outerHTML)||document.head.appendChild(s)}),n(this,d).add(()=>{s.remove()})):e.appendChild(s)},H=new WeakSet,oe=function(e){return[e].flat().map(t=>t instanceof G?t.node:typeof t=="function"?X.isESClass(t)?new t:t():a(this,L,U).call(this,t)).flat().filter(Boolean)},F=new WeakSet,ae=function(e,s,t){t.length>s.length&&t.forEach(i=>{s.find(o=>a(this,C,I).call(this,i,o))||(e.removeChild(i),t=t.filter(o=>o!==i))}),t.forEach((i,o)=>{if(o<s.length){const c=s[o];a(this,C,I).call(this,i,c)||e.replaceChild(c,i)}else e.removeChild(i)});for(let i=t.length;i<s.length;i++)e.appendChild(s[i])},C=new WeakSet,I=function(e,s){return s?s instanceof Node?e.isEqualNode(s):e.textContent===s.toString():!1},L=new WeakSet,U=function(e){if(e instanceof Node)return e;if(e!=null){const s=String(e);if(s.trim().startsWith("<")&&s.trim().endsWith(">")){const t=document.createElement("div");return t.innerHTML=s,t.firstElementChild}else return new Text(s)}else return},P=new WeakMap,B=new WeakMap;let W=G;exports.ElementConstructor=W;
