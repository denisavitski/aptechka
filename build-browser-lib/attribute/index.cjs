"use strict";var f=(e,s,t)=>{if(!s.has(e))throw TypeError("Cannot "+t)};var r=(e,s,t)=>(f(e,s,"read from private field"),t?t.call(e):s.get(e)),n=(e,s,t)=>{if(s.has(e))throw TypeError("Cannot add the same private member more than once");s instanceof WeakSet?s.add(e):s.set(e,t)},a=(e,s,t,c)=>(f(e,s,"write to private field"),c?c.call(e,t):s.set(e,t),t);var v=(e,s,t)=>(f(e,s,"access private method"),t);Object.defineProperty(exports,Symbol.toStringTag,{value:"Module"});const y=require("../Store-D0_rDIsE.cjs"),A=require("../attributes-Bf2svn4j.cjs"),S=require("../browser-CpzFX2xg.cjs"),q=require("../dom-qY2LdCVL.cjs");var i,u,b,h,m;class p extends y.Store{constructor(t,c,l,o){super(l,o);n(this,h);n(this,i,null);n(this,u,void 0);n(this,b,null);a(this,u,c),S.isBrowser&&(a(this,i,q.getElement(t)),a(this,b,new MutationObserver(d=>{d.forEach(g=>{g.type==="attributes"&&g.attributeName===r(this,u)&&v(this,h,m).call(this)})})),o!=null&&o.sync&&this.subscribe(d=>{r(this,i).setAttribute(r(this,u),d.current.toString())}))}subscribe(t){const c=!this.subscribers.size,l=super.subscribe(t);return c&&(r(this,b).observe(r(this,i),{attributes:!0}),v(this,h,m).call(this)),l}unsubscribe(t){super.unsubscribe(t),this.subscribers.size||r(this,b).disconnect()}close(){super.close(),r(this,b).disconnect()}}i=new WeakMap,u=new WeakMap,b=new WeakMap,h=new WeakSet,m=function(){const t=r(this,i).getAttribute(r(this,u));t!=null&&(this.current=A.parseAttributeValue(t))};exports.Attribute=p;
