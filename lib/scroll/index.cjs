"use strict";var xt=(i,e,s)=>{if(!e.has(i))throw TypeError("Cannot "+s)};var l=(i,e,s)=>(xt(i,e,"read from private field"),s?s.call(i):e.get(i)),T=(i,e,s)=>{if(e.has(i))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(i):e.set(i,s)},V=(i,e,s,n)=>(xt(i,e,"write to private field"),n?n.call(i,s):e.set(i,s),s);Object.defineProperty(exports,Symbol.toStringTag,{value:"Module"});const zt=require("../Store-txkR3wXU.cjs"),Ct=require("../browser-QbF6EW-w.cjs"),ot=require("../layout-rZzbsLPd.cjs"),Wt=require("../math-FNUBmQPK.cjs");require("../ticker/index.cjs");const qt=require("../Damped-DdPj4Sho.cjs"),W=require("../attribute/index.cjs"),yt=require("../WheelControls-TYhGU6oA.cjs"),pt=require("../custom-element/index.cjs"),wt=require("../order/index.cjs"),at=require("../resizer/index.cjs"),B=require("../scroll-entries/index.cjs"),Ot=require("../dom-QhWsdQS2.cjs");require("../intersector/index.cjs");require("../number-2bR0KBcX.cjs");require("../attributes-_2U65GDl.cjs");require("../notifier/index.cjs");require("../function-QP7IreXR.cjs");var Vt=Object.defineProperty,$t=Object.getOwnPropertyDescriptor,Pt=(i,e,s,n)=>{for(var c=n>1?void 0:n?$t(e,s):e,b=i.length-1,r;b>=0;b--)(r=i[b])&&(c=(n?r(e,s,c):r(c))||c);return n&&c&&Vt(e,s,c),c},_t=(i,e,s)=>{if(!e.has(i))throw TypeError("Cannot "+s)},t=(i,e,s)=>(_t(i,e,"read from private field"),s?s.call(i):e.get(i)),o=(i,e,s)=>{if(e.has(i))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(i):e.set(i,s)},w=(i,e,s,n)=>(_t(i,e,"write to private field"),n?n.call(i,s):e.set(i,s),s),f=(i,e,s)=>(_t(i,e,"access private method"),s),a,M,A,L,x,y,D,H,I,d,u,j,_,p,O,G,m,J,$,N,ct,K,Q,ut,Et,dt,St,tt,mt,et,bt,R,ft,vt,kt,st,it,gt,E,g,P,C;class Rt{constructor(e,s){T(this,E,void 0);T(this,g,void 0);T(this,P,0);T(this,C,0);V(this,E,e),V(this,g,s),B.scrollEnties.register(l(this,E))}get size(){return l(this,P)}get position(){return l(this,C)}destroy(){B.scrollEnties.unregister(l(this,E)),l(this,E).style.transform=""}resize(){V(this,P,l(this,g).vertical?l(this,E).offsetHeight:l(this,E).offsetWidth),V(this,C,l(this,g).vertical?ot.getCumulativeOffsetTop(l(this,E)):ot.getCumulativeOffsetLeft(l(this,E))),V(this,C,l(this,C)-l(this,g).position)}transform(){let e=0;l(this,g).infiniteAttribute.current&&l(this,g).overscroll&&l(this,C)+l(this,P)<l(this,g).currentScrollValue&&(e=l(this,g).distance*-1),B.scrollEnties.update(l(this,E),l(this,g).axisAttibute.current,e);const s=Wt.clamp(l(this,g).currentScrollValue+e,l(this,C)-l(this,g).viewportSize,l(this,C)+l(this,P));l(this,g).vertical?l(this,E).style.transform=`translate3d(0px, ${s*-1}px, 0px)`:l(this,E).style.transform=`translate3d(${s*-1}px, 0px, 0px)`}}E=new WeakMap,g=new WeakMap,P=new WeakMap,C=new WeakMap;exports.ScrollElement=class extends pt.CustomElement{constructor(){if(super(),o(this,N),o(this,K),o(this,ut),o(this,dt),o(this,tt),o(this,et),o(this,vt),o(this,it),o(this,a,null),o(this,M,new W.Attribute(this,"axis","y")),o(this,A,new W.Attribute(this,"pages",0,{validate:e=>Math.max(0,e-1)})),o(this,L,new W.Attribute(this,"sectional",!1)),o(this,x,new W.Attribute(this,"infinite",!1)),o(this,y,new W.Attribute(this,"split",!1)),o(this,D,new W.Attribute(this,"damping",.03)),o(this,H,new W.Attribute(this,"disabled",!1)),o(this,I,new W.Attribute(this,"hibernated",!1)),o(this,d,null),o(this,u,[]),o(this,j,0),o(this,_,0),o(this,p,0),o(this,O,null),o(this,G,null),o(this,m,new zt.Store(0)),o(this,J,0),o(this,$,0),o(this,R,()=>{const e=this.currentScrollValue/t(this,p);if(w(this,j,this.vertical?ot.getCumulativeOffsetTop(this):ot.getCumulativeOffsetLeft(this)),w(this,_,this.vertical?this.offsetHeight:this.offsetWidth),t(this,A).current){w(this,p,t(this,_)*t(this,A).current);const s=t(this,p)+t(this,_);this.vertical?(t(this,d).style.width=s+"px",t(this,d).style.height="100%"):(t(this,d).style.height=s+"px",t(this,d).style.width="100%")}else this.vertical?(t(this,d).style.width="100%",t(this,d).style.height="max-content",w(this,p,t(this,d).offsetHeight-t(this,_))):(t(this,d).style.width="max-content",t(this,d).style.height="100%",w(this,p,t(this,d).offsetWidth-t(this,_)));if(t(this,x)||(t(this,a).max=t(this,p)),t(this,u).forEach(s=>{s.resize(),s.transform()}),t(this,x).current&&t(this,u).length){const s=t(this,u)[t(this,u).length-1],n=s.position+s.size-t(this,_),c=t(this,p)-n;w(this,$,s.position+s.size+c)}else w(this,$,t(this,p));if(t(this,L).current&&t(this,u).length){const s=t(this,u)[t(this,m).current];t(this,a).set(s.position,!0)}else t(this,a).set(e*t(this,p),!0)}),o(this,ft,()=>{if(t(this,u).length){let e=0;for(let s=0;s<t(this,u).length;s++){const n=t(this,u)[s];n.transform(),this.targetScrollValue>=n.position&&(e=s)}t(this,m).current=e}else this.vertical?t(this,d).style.transform=`translate3d(0px, ${this.currentScrollValue*-1}px, 0px)`:t(this,d).style.transform=`translate3d(${this.currentScrollValue*-1}px, 0px, 0px)`;B.scrollEnties.update(this,t(this,M).current,this.currentScrollValue)}),o(this,st,e=>{if(typeof e=="number")if(t(this,L).current){const s=Math.sign(e);t(this,u).length?this.shiftSections(s):t(this,a).shift(s*t(this,_))}else t(this,a).shift(e);else e==="min"?t(this,a).set(t(this,a).min):e==="max"&&t(this,a).set(t(this,a).delta)}),Ct.isBrowser){w(this,a,new qt.Damped({damping:.01,min:0,order:wt.TICK_ORDER.SCROLL}));const e=this.attachShadow({mode:"open"}),s=document.createElement("style");s.textContent=`
        :host {
          position: relative;

          width: 100%;
          height: 100%;

          display: block;
          outline: none;
        }

        :host([hibernated="true"]) {
          display: contents;
        }

        .static {
          position: absolute;
          top: 0;
          left: 0;

          z-index: 1;

          width: 100%;
          height: 100%;

        }
  
        .content {
          display: flex;
        }

        :host([hibernated="true"]) .content {
          display: contents;
        }
  
        ::slotted(*) {
          flex-shrink: 0;
        }
      `,e.appendChild(s),this.tabIndex=0;const n=document.createElement("div");n.classList.add("static"),e.appendChild(n);const c=document.createElement("slot");c.setAttribute("name","static"),n.appendChild(c),w(this,d,document.createElement("div")),t(this,d).classList.add("content"),e.appendChild(t(this,d));const b=document.createElement("slot");t(this,d).appendChild(b),w(this,O,new yt.WheelControls({element:this})),t(this,O).changeEvent.subscribe(t(this,st)),w(this,G,new yt.KeyboardControls({element:this})),t(this,G).changeEvent.subscribe(t(this,st)),t(this,M).subscribe(({current:r})=>{t(this,d).style.flexDirection=r==="x"?"row":"column",t(this,O).axis=r,this.isConnected&&t(this,R).call(this)}),t(this,A).subscribe(()=>{this.isConnected&&t(this,R).call(this)}),t(this,L).subscribe(r=>{t(this,m).current=0,t(this,O).debounce=r.current,t(this,a).reset(),this.isConnected&&(r.current&&!r.previous?f(this,N,ct).call(this):!r.current&&r.previous&&f(this,K,Q).call(this))}),t(this,x).subscribe(r=>{r.current?(this.isConnected&&(t(this,u).length||(t(this,y).current=!0)),t(this,u).length&&(t(this,a).max=1/0,t(this,a).min=-1/0)):(w(this,J,0),t(this,a).max=t(this,p),t(this,a).min=0)}),t(this,y).subscribe(({current:r})=>{this.isConnected&&(r?f(this,N,ct).call(this):f(this,K,Q).call(this))}),t(this,D).subscribe(r=>{t(this,a).damping=r.current}),t(this,H).subscribe(r=>{r.current&&!r.previous?f(this,ut,Et).call(this):!r.current&&r.previous&&f(this,dt,St).call(this)}),t(this,I).subscribe(r=>{r.current&&!r.previous?f(this,tt,mt).call(this):!r.current&&r.previous&&f(this,et,bt).call(this)})}}get currentScrollValue(){return f(this,it,gt).call(this,"current")}get targetScrollValue(){return f(this,it,gt).call(this,"target")}get damped(){return t(this,a)}get dampedAttibute(){return t(this,a)}get axisAttibute(){return t(this,M)}get pagesAttibute(){return t(this,A)}get sectionalAttibute(){return t(this,L)}get infiniteAttribute(){return t(this,x)}get splitAttibute(){return t(this,y)}get dampingAttibute(){return t(this,D)}get disabledAttibute(){return t(this,H)}get hibernatedAttibute(){return t(this,I)}get position(){return t(this,j)}get viewportSize(){return t(this,_)}get scrollSize(){return t(this,p)}get counter(){return t(this,m)}get distance(){return t(this,$)}get overscroll(){return t(this,J)}get vertical(){return t(this,M).current==="y"}get currentProgress(){return this.currentScrollValue/t(this,$)}get targetProgress(){return this.targetScrollValue/t(this,$)}scrollToSection(e,s="smooth"){if(!t(this,u).length)return;const n=t(this,m).current;f(this,vt,kt).call(this,e);const c=t(this,u)[n],b=t(this,u)[t(this,m).current];if(c&&b){let r=0;const Y=t(this,u).length-1;t(this,m).current===0&&n===Y?r=t(this,p)+t(this,_)-c.position:t(this,m).current===Y&&n===0?r=b.position-(t(this,p)+t(this,_)):r=b.position-c.position,t(this,a).shift(r,s==="instant")}}shiftSections(e,s="smooth"){t(this,u).length&&this.scrollToSection(t(this,m).current+e,s)}connectedCallback(){f(this,et,bt).call(this),t(this,M).observe(),t(this,A).observe(),t(this,L).observe(),t(this,x).observe(),t(this,y).observe(),t(this,D).observe(),t(this,H).observe(),t(this,I).observe()}disconnectedCallback(){f(this,tt,mt).call(this),t(this,M).unobserve(),t(this,A).unobserve(),t(this,L).unobserve(),t(this,x).unobserve(),t(this,y).unobserve(),t(this,D).unobserve(),t(this,H).unobserve(),t(this,I).unobserve()}};a=new WeakMap;M=new WeakMap;A=new WeakMap;L=new WeakMap;x=new WeakMap;y=new WeakMap;D=new WeakMap;H=new WeakMap;I=new WeakMap;d=new WeakMap;u=new WeakMap;j=new WeakMap;_=new WeakMap;p=new WeakMap;O=new WeakMap;G=new WeakMap;m=new WeakMap;J=new WeakMap;$=new WeakMap;N=new WeakSet;ct=function(){f(this,K,Q).call(this),t(this,d).querySelector("slot").assignedElements().forEach(e=>{e instanceof HTMLElement&&t(this,u).push(new Rt(e,this))}),t(this,d).style.transform="",t(this,R).call(this)};K=new WeakSet;Q=function(){t(this,u).forEach(i=>{i.destroy()}),w(this,u,[])};ut=new WeakSet;Et=function(){t(this,a).unsubscribe(t(this,ft)),t(this,a).unlistenAnimationFrame(),t(this,O).disconnect(),t(this,G).disconnect()};dt=new WeakSet;St=function(){t(this,a).subscribe(t(this,ft)),t(this,O).connect(),t(this,G).connect()};tt=new WeakSet;mt=function(){at.resizer.unsubscribe(t(this,R)),t(this,a).reset(),f(this,ut,Et).call(this),t(this,d).style.transform="",t(this,y).current&&f(this,K,Q).call(this),B.scrollEnties.unregister(this)};et=new WeakSet;bt=function(){t(this,y).current&&f(this,N,ct).call(this),B.scrollEnties.register(this),at.resizer.subscribe(t(this,R),wt.RESIZE_ORDER.SCROLL),f(this,dt,St).call(this)};R=new WeakMap;ft=new WeakMap;vt=new WeakSet;kt=function(i){t(this,x).current?(t(this,m).current=i%t(this,u).length,t(this,m).current=t(this,m).current<0?t(this,u).length+t(this,m).current:t(this,m).current):t(this,m).current=Wt.clamp(i,0,t(this,u).length-1)};st=new WeakMap;it=new WeakSet;gt=function(i="current"){if(t(this,x).current&&t(this,u).length){const e=t(this,a)[i]%(t(this,p)+t(this,_)),s=e<0?t(this,p)+e+t(this,_):e;return w(this,J,Math.max(0,s-t(this,p))),s}else return t(this,a)[i]};exports.ScrollElement=Pt([pt.define("e-scroll")],exports.ScrollElement);var X;class Tt extends pt.CustomElement{constructor(){super(...arguments);T(this,X,null)}get scrollElement(){return l(this,X)}connectedCallback(){const s=Ot.findParentElement(this,exports.ScrollElement);s instanceof exports.ScrollElement?V(this,X,s):console.error(this,"e-scroll not found")}}X=new WeakMap;var Dt=Object.defineProperty,Ht=Object.getOwnPropertyDescriptor,It=(i,e,s,n)=>{for(var c=n>1?void 0:n?Ht(e,s):e,b=i.length-1,r;b>=0;b--)(r=i[b])&&(c=(n?r(e,s,c):r(c))||c);return n&&c&&Dt(e,s,c),c},Mt=(i,e,s)=>{if(!e.has(i))throw TypeError("Cannot "+s)},h=(i,e,s)=>(Mt(i,e,"read from private field"),s?s.call(i):e.get(i)),S=(i,e,s)=>{if(e.has(i))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(i):e.set(i,s)},k=(i,e,s,n)=>(Mt(i,e,"write to private field"),n?n.call(i,s):e.set(i,s),s),Z,v,z,q,F,U,rt,nt,ht,lt;exports.ScrollbarElement=class extends Tt{constructor(){if(super(),S(this,Z,null),S(this,v,null),S(this,z,!1),S(this,q,0),S(this,F,0),S(this,U,0),S(this,rt,()=>{k(this,z,this.offsetWidth>this.offsetHeight);const e=h(this,z)?this.offsetWidth:this.offsetHeight;k(this,q,e/((this.scrollElement.scrollSize+this.scrollElement.viewportSize)/e)),k(this,q,Math.max(h(this,q),30)),h(this,z)?(h(this,v).style.width=h(this,q)+"px",h(this,v).style.height="100%"):(h(this,v).style.width="100%",h(this,v).style.height=h(this,q)+"px"),k(this,F,e-h(this,q)),this.scrollElement.scrollSize||(this.style.display="none")}),S(this,nt,()=>{k(this,U,this.scrollElement.currentProgress*h(this,F)),h(this,z)?h(this,v).style.transform=`translate3d(${h(this,U)}px, 0px, 0px)`:h(this,v).style.transform=`translate3d(0px, ${h(this,U)}px, 0px)`}),S(this,ht,()=>{this.setAttribute("axis",this.scrollElement.axisAttibute.current)}),S(this,lt,e=>{const s=r=>{const Y=h(this,z)?r.x:r.y,At=this.scrollElement.distance/h(this,F),Lt=(Y-b)*At;this.scrollElement.damped.set(c+Lt)},n=()=>{removeEventListener("pointermove",s),removeEventListener("pointerup",n),removeEventListener("touchend",n)};addEventListener("pointermove",s),addEventListener("pointerup",n),addEventListener("touchend",n);const c=this.scrollElement.damped.target,b=h(this,z)?e.x:e.y}),Ct.isBrowser){const e=this.attachShadow({mode:"open"}),s=document.createElement("style");s.textContent=`
        :host {
          display: inline-block;
          z-index: 1;
          background-color: #efefef;
        }

        :host([axis="y"]) {
          position: absolute;
          right: 0;
          top: 0;
          width: 1vmin;
          height: 100%;
        }

        :host([axis="x"]) {
          position: absolute;
          left: 0;
          bottom: 0;
          width: 100%;
          height: 1vmin;
        }

        .default-thumb {
          background-color: #181818;
          border-radius: 1vmin;
          touch-action: none;
        }

        ::slotted(*) {
          touch-action: none;
        }
      `,e.appendChild(s),k(this,Z,document.createElement("slot")),e.appendChild(h(this,Z))}}get thumbElement(){return h(this,v)}connectedCallback(){super.connectedCallback();const e=h(this,Z).assignedElements()[0];e instanceof HTMLElement?k(this,v,e):(k(this,v,document.createElement("div")),h(this,v).classList.add("default-thumb"),this.shadowRoot.appendChild(h(this,v))),h(this,v).addEventListener("pointerdown",h(this,lt)),at.resizer.subscribe(h(this,rt),wt.RESIZE_ORDER.SCROLL+1),this.scrollElement.damped.subscribe(h(this,nt)),this.scrollElement.axisAttibute.subscribe(h(this,ht))}disconnectedCallback(){h(this,v).removeEventListener("pointerdown",h(this,lt)),at.resizer.unsubscribe(h(this,rt)),this.scrollElement.damped.unsubscribe(h(this,nt)),this.scrollElement.axisAttibute.unsubscribe(h(this,ht))}};Z=new WeakMap;v=new WeakMap;z=new WeakMap;q=new WeakMap;F=new WeakMap;U=new WeakMap;rt=new WeakMap;nt=new WeakMap;ht=new WeakMap;lt=new WeakMap;exports.ScrollbarElement=It([pt.define("e-scrollbar")],exports.ScrollbarElement);
