"use strict";var N=(l,i,t)=>{if(!i.has(l))throw TypeError("Cannot "+t)};var e=(l,i,t)=>(N(l,i,"read from private field"),t?t.call(l):i.get(l)),s=(l,i,t)=>{if(i.has(l))throw TypeError("Cannot add the same private member more than once");i instanceof WeakSet?i.add(l):i.set(l,t)},c=(l,i,t,h)=>(N(l,i,"write to private field"),h?h.call(l,t):i.set(l,t),t);var o=(l,i,t)=>(N(l,i,"access private method"),t);Object.defineProperty(exports,Symbol.toStringTag,{value:"Module"});const W=require("../attribute/index.cjs"),F=require("../browser-CpzFX2xg.cjs"),G=require("../dom-JBOkFLTh.cjs"),j=require("../events-BGwqaxVW.cjs"),J=require("../style-At6aDoqG.cjs");var a,r,f,n,v,I,L,m,x,H,_,y,M,z,p,R,C,d,g,b,E,w,B,S;class D{constructor(i,t){s(this,H);s(this,y);s(this,d);s(this,b);s(this,w);s(this,a,null);s(this,r,null);s(this,f,null);s(this,n,null);s(this,v,null);s(this,I,!1);s(this,L,void 0);s(this,m,!1);s(this,x,[]);s(this,z,()=>{e(this,m)?this.close():this.open()});s(this,p,()=>{e(this,m)&&(o(this,d,g).call(this,0,!0),o(this,d,g).call(this,e(this,y,M)))});s(this,R,()=>{o(this,b,E).call(this,"size-change")});s(this,C,i=>{e(this,m)&&(o(this,d,g).call(this,0,!0),o(this,d,g).call(this,e(this,y,M)),e(this,x).forEach(t=>{t.element.scroll({left:e(this,a).axisAttribute.current==="x"?t.scroll:0,top:e(this,a).axisAttribute.current==="y"?t.scroll:0})}))});s(this,S,()=>{const i=G.getAllParentElements(e(this,r));c(this,x,i.map(t=>({element:t,scroll:e(this,a).axisAttribute.current==="y"?t.scrollTop:t.scrollLeft})))});t.firstElementChild instanceof HTMLElement&&t.lastElementChild instanceof HTMLElement?(c(this,a,i),c(this,r,t),c(this,f,t.firstElementChild),c(this,n,t.lastElementChild),e(this,f).style.cursor="default",e(this,n).style.overflow="hidden",e(this,a).axisAttribute.current==="y"?e(this,n).style.height="0px":e(this,n).style.width="0px",c(this,v,new ResizeObserver(e(this,R))),addEventListener("resize",e(this,p)),e(this,f).addEventListener("click",e(this,z)),e(this,r).addEventListener("beforeSizeChange",e(this,S)),e(this,r).addEventListener("sizeChange",e(this,C)),e(this,r).hasAttribute("data-opened")&&this.open({skipTransition:!0})):i.removeItem(e(this,r))}get element(){return e(this,r)}destroy(){e(this,f)&&(e(this,r).classList.remove("opened","triggered"),e(this,f).style.cursor="",o(this,d,g).call(this,void 0),e(this,v).disconnect(),removeEventListener("resize",e(this,p)),e(this,f).removeEventListener("click",e(this,z)),e(this,r).removeEventListener("beforeSizeChange",e(this,S)),e(this,r).removeEventListener("sizeChange",e(this,C)),clearTimeout(e(this,L)))}open(i){o(this,b,E).call(this,"before-toggle"),i!=null&&i.skipTransition&&o(this,w,B).call(this),e(this,a).multipleAttribute.current||e(this,a).closeAll({exclude:e(this,r)}),e(this,I)||e(this,v).observe(e(this,n)),c(this,m,!0),clearTimeout(e(this,L)),e(this,r).classList.add("triggered"),o(this,d,g).call(this,e(this,y,M)),setTimeout(()=>{e(this,r).classList.add("opened")},0),o(this,b,E).call(this,"toggle")}close(i){o(this,b,E).call(this,"before-toggle"),i!=null&&i.skipTransition&&o(this,w,B).call(this),c(this,m,!1),e(this,r).classList.remove("opened"),o(this,d,g).call(this,0),c(this,L,setTimeout(()=>{e(this,r).classList.remove("triggered")},J.getElementTransitionDurationMS(e(this,n)))),o(this,b,E).call(this,"toggle")}}a=new WeakMap,r=new WeakMap,f=new WeakMap,n=new WeakMap,v=new WeakMap,I=new WeakMap,L=new WeakMap,m=new WeakMap,x=new WeakMap,H=new WeakSet,_=function(){return e(this,r).parentElement||e(this,r).getRootNode()},y=new WeakSet,M=function(){return e(this,a).axisAttribute.current==="x"?e(this,n).scrollWidth:e(this,n).scrollHeight},z=new WeakMap,p=new WeakMap,R=new WeakMap,C=new WeakMap,d=new WeakSet,g=function(i,t=!1){t&&(e(this,n).style.transition="all 0s",setTimeout(()=>{e(this,n).style.transition=""}));const h=e(this,a).axisAttribute.current==="x"?"width":"height";i!=null?e(this,n).style[h]=`${i}px`:e(this,n).style[h]=""},b=new WeakSet,E=function(i){i==="before-toggle"?j.dispatchBeforeSizeChangeEvent(e(this,r)):i==="toggle"?e(this,r).dispatchEvent(new CustomEvent("accordionItemToggle",{bubbles:!0,composed:!0,detail:{opened:e(this,m)}})):i==="size-change"&&j.dispatchSizeChangeEvent(e(this,H,_))},w=new WeakSet,B=function(){e(this,n).style.transition="all 0s",setTimeout(()=>{e(this,n).style.transition=""},50)},S=new WeakMap;var q,O,u,T,k,P;class $ extends HTMLElement{constructor(){super();s(this,k);s(this,q,new W.Attribute(this,"axis","y"));s(this,O,new W.Attribute(this,"multiple",!1));s(this,u,[]);s(this,T,null);F.isBrowser&&c(this,T,new MutationObserver(t=>{t.forEach(h=>{h.removedNodes.forEach(A=>{A instanceof HTMLElement&&this.removeItem(A)}),h.addedNodes.forEach(A=>{A instanceof HTMLElement&&this.createItem(A)})})}))}get axisAttribute(){return e(this,q)}get multipleAttribute(){return e(this,O)}createItem(t){e(this,u).find(h=>h.element===t)||e(this,u).push(new D(this,t))}removeItem(t){c(this,u,e(this,u).filter(h=>{if(h.element!==t)return!0;h.destroy()}))}closeAll(t){e(this,u).forEach(h=>{(t==null?void 0:t.exclude)!==h.element&&h.close(t)})}openAll(t){e(this,u).forEach(h=>{(t==null?void 0:t.exclude)!==h.element&&h.open(t)})}connectedCallback(){e(this,T).observe(e(this,k,P),{childList:!0}),c(this,u,[...e(this,k,P).children].map(t=>{if(t instanceof HTMLElement)return new D(this,t)}).filter(t=>!!t))}disconnectedCallback(){e(this,T).disconnect()}}q=new WeakMap,O=new WeakMap,u=new WeakMap,T=new WeakMap,k=new WeakSet,P=function(){return this.shadowRoot?this.shadowRoot:this};customElements.get("e-accordion")||customElements.define("e-accordion",$);exports.AccordionElement=$;
