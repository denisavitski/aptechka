"use strict";var R=(s,r,e)=>{if(!r.has(s))throw TypeError("Cannot "+e)};var t=(s,r,e)=>(R(s,r,"read from private field"),e?e.call(s):r.get(s)),h=(s,r,e)=>{if(r.has(s))throw TypeError("Cannot add the same private member more than once");r instanceof WeakSet?r.add(s):r.set(s,e)},v=(s,r,e,c)=>(R(s,r,"write to private field"),c?c.call(s,e):r.set(s,e),e);var k=(s,r,e)=>new Promise((c,i)=>{var a=n=>{try{l(e.next(n))}catch(o){i(o)}},u=n=>{try{l(e.throw(n))}catch(o){i(o)}},l=n=>n.done?c(n.value):Promise.resolve(n.value).then(a,u);l((e=e.apply(s,r)).next())});Object.defineProperty(exports,Symbol.toStringTag,{value:"Module"});const d=require("../Store-Cr3VaD9G.cjs"),q=require("../Derived-CNbsNMn_.cjs"),M=require("../Composed-Iihn8fT4.cjs");var A;class I extends d.Store{constructor(e,c,i){super(null,i);h(this,A,void 0);v(this,A,e.subscribe(a=>{this.current=a.current.map((u,l,n)=>c(u,l,n))}))}close(){super.close(),t(this,A).call(this)}}A=new WeakMap;var g;class V extends d.Store{constructor(e,c,i){super(null,i);h(this,g,void 0);let a=0;v(this,g,e.subscribe(u=>k(this,null,function*(){const l=++a,n=u.current.map((b,x,P)=>c(b,x,P)),o=yield Promise.all(n);l===a&&(this.current=o)})))}close(){super.close(),t(this,g).call(this)}}g=new WeakMap;var D,p;class j extends d.Store{constructor(e,c,i){super(null,i);h(this,D,void 0);h(this,p,new Map);v(this,D,e.subscribe(a=>{this.current=a.current.map((u,l,n)=>{let o=t(this,p).get(u.key);return(o===void 0||u.revalidate)&&(o=c(u.value,l,n),t(this,p).set(u.key,o)),o})}))}close(){super.close(),t(this,D).call(this),t(this,p).clear()}}D=new WeakMap,p=new WeakMap;var m,f;class O extends d.Store{constructor(e,c,i){super(null,i);h(this,m,void 0);h(this,f,new Map);let a=0;v(this,m,e.subscribe(u=>k(this,null,function*(){const l=++a,n=u.current.map((b,x,P)=>{let w=t(this,f).get(b.key);return(w===void 0||b.revalidate)&&(w=c(b.value,x,P),t(this,f).set(b.key,w)),w}),o=yield Promise.all(n);l===a&&(this.current=o)})))}close(){super.close(),t(this,m).call(this),t(this,f).clear()}}m=new WeakMap,f=new WeakMap;var C,y,S;class T extends d.Store{constructor(e,c,i){super(e,i);h(this,C,void 0);h(this,y,void 0);h(this,S,0);v(this,y,new d.Store(!1)),v(this,C,c),i!=null&&i.manualControl||this.refetch()}get isPending(){return t(this,y)}refetch(){t(this,y).current=!0,v(this,S,t(this,S)+1);const e=t(this,S);t(this,C).call(this).then(c=>{e===t(this,S)&&(t(this,y).current=!1,this.current=c)})}}C=new WeakMap,y=new WeakMap,S=new WeakMap;exports.Store=d.Store;exports.activeStores=d.activeStores;exports.storeRegistry=d.storeRegistry;exports.AsyncDerived=q.AsyncDerived;exports.Derived=q.Derived;exports.Composed=M.Composed;exports.AsyncCached=O;exports.AsyncDerivedArray=V;exports.Cached=j;exports.DerivedArray=I;exports.Resource=T;
