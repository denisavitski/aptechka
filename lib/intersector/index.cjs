"use strict";var y=(n,t,s)=>{if(!t.has(n))throw TypeError("Cannot "+s)};var r=(n,t,s)=>(y(n,t,"read from private field"),s?s.call(n):t.get(n)),b=(n,t,s)=>{if(t.has(n))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(n):t.set(n,s)},f=(n,t,s,e)=>(y(n,t,"write to private field"),e?e.call(n,s):t.set(n,s),s);Object.defineProperty(exports,Symbol.toStringTag,{value:"Module"});const g=require("../browser-CpzFX2xg.cjs"),w=require("../dom-JBOkFLTh.cjs");var i,u,l;class m{constructor(){b(this,i,[]);b(this,u,null);b(this,l,t=>{r(this,i).map(e=>({subscriber:e,entry:t.find(o=>o.target===e.element)})).forEach(e=>{e.entry&&(e.subscriber.entry=e.entry,e.subscriber.callback(e.entry))})});g.isBrowser&&window.IntersectionObserver&&f(this,u,new IntersectionObserver(r(this,l)))}subscribe(t,s){const e=w.getElement(t);if(!e)return()=>{};const o=r(this,i).find(c=>c.element===e);if(!o)r(this,u).observe(e);else{const c=r(this,i).find(h=>h.element===e&&h.entry);c!=null&&c.entry.isIntersecting&&s(c.entry)}return r(this,i).push({element:e,callback:s,entry:(o==null?void 0:o.entry)||null}),console.log(r(this,i)),()=>{this.unsubscribe(s)}}unsubscribe(t){const s=r(this,i).find(e=>e.callback===t);s&&(f(this,i,r(this,i).filter(e=>e.callback===t)),r(this,i).find(e=>e.element===s.element)||r(this,u).unobserve(s.element))}}i=new WeakMap,u=new WeakMap,l=new WeakMap;const d=new m;exports.Intersector=m;exports.intersector=d;
