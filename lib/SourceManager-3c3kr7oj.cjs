"use strict";var M=(n,s,t)=>{if(!s.has(n))throw TypeError("Cannot "+t)};var r=(n,s,t)=>(M(n,s,"read from private field"),t?t.call(n):s.get(n)),o=(n,s,t)=>{if(s.has(n))throw TypeError("Cannot add the same private member more than once");s instanceof WeakSet?s.add(n):s.set(n,t)},c=(n,s,t,i)=>(M(n,s,"write to private field"),i?i.call(n,t):s.set(n,t),t);const k=require("./order/index.cjs"),R=require("./resizer/index.cjs"),z=require("./Store-WXFmsaEI.cjs");var l,g,q,x,a,p,E;class I{constructor(s){o(this,l,void 0);o(this,g,void 0);o(this,q,void 0);o(this,x,void 0);o(this,a,void 0);o(this,p,void 0);o(this,E,void 0);c(this,l,s);const t=s.indexOf("?");t>=0&&(s=s.slice(0,t));const i=s.split(".");c(this,g,i[0]);const d=/\d+x/g,h=i.find(f=>f.match(d));c(this,q,h?parseInt(h):1);const y=/\d+max/g,w=/\d+min/g,e=i.find(f=>f.match(y)),u=i.find(f=>f.match(w));e?(c(this,a,parseInt(e)),c(this,p,"max"),c(this,x,`(max-width: ${r(this,a)}px)`)):u?(c(this,a,parseInt(u)),c(this,x,`(min-width: ${r(this,a)}px)`),c(this,p,"min")):(c(this,a,0),c(this,x,`(min-width: ${r(this,a)}px)`),c(this,p,"min")),c(this,E,"."+i[i.length-1])}get url(){return r(this,l)}get name(){return r(this,g)}get density(){return r(this,q)}get query(){return r(this,x)}get extension(){return r(this,E)}get queryType(){return r(this,p)}get queryPx(){return r(this,a)}}l=new WeakMap,g=new WeakMap,q=new WeakMap,x=new WeakMap,a=new WeakMap,p=new WeakMap,E=new WeakMap;var m;class b{constructor(s){o(this,m,void 0);c(this,m,new Map);const t=typeof s=="string"?s.trim().split(",").map(e=>e.trim()).filter(e=>!!e):s,i=[];t.forEach(e=>{const u=new I(e);i.push([u.query,u])});const d=i.filter(e=>e[1].queryType==="max").sort((e,u)=>u[1].queryPx-e[1].queryPx),h=i.filter(e=>e[1].queryType==="min"&&e[1].queryPx!==0).sort((e,u)=>e[1].queryPx-u[1].queryPx),y=i.filter(e=>e[0]==="(min-width: 0px)");(y?[...y,...d,...h]:[...d,...h]).forEach(e=>{r(this,m).has(e[0])||r(this,m).set(e[0],[]),r(this,m).get(e[0]).push(e[1])})}get mediaBuckets(){return r(this,m)}}m=new WeakMap;var P,S;class B extends z.Store{constructor(t){super(void 0);o(this,P,void 0);o(this,S,()=>{let t;r(this,P).mediaBuckets.forEach((h,y)=>{matchMedia(y).matches&&(t=h)});let i,d=0;t==null||t.forEach(h=>{h.density>d&&h.density<=Math.max(devicePixelRatio,1)&&(d=h.density,i=h)}),t!=null&&t.length&&!i&&(i=t[0]),this.current=i});c(this,P,new b(t.srcset))}close(){super.close(),this.disconnect()}connect(){R.resizer.subscribe(r(this,S),k.RESIZE_ORDER.SOURCE_MANAGER)}disconnect(){R.resizer.unsubscribe(r(this,S))}}P=new WeakMap,S=new WeakMap;exports.Source=I;exports.SourceManager=B;exports.SourceSet=b;
