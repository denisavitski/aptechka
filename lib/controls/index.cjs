"use strict";var N=(r,n,e)=>{if(!n.has(r))throw TypeError("Cannot "+e)};var t=(r,n,e)=>(N(r,n,"read from private field"),e?e.call(r):n.get(r)),s=(r,n,e)=>{if(n.has(r))throw TypeError("Cannot add the same private member more than once");n instanceof WeakSet?n.add(r):n.set(r,e)},i=(r,n,e,a)=>(N(r,n,"write to private field"),a?a.call(r,e):n.set(r,e),e);var L=(r,n,e)=>(N(r,n,"access private method"),e);Object.defineProperty(exports,Symbol.toStringTag,{value:"Module"});const V=require("../notifier/index.cjs"),m=require("../browser-CpzFX2xg.cjs"),Q=require("../dom-JBOkFLTh.cjs"),M=require("../ticker/index.cjs");require("../Store-Cr3VaD9G.cjs");const G=require("../easings-DsS5-Kqc.cjs"),J=require("../Tweened-DksN-Rz6.cjs"),Z=require("../gestures-DHLrn6Q8.cjs"),$=require("../polyfills-CM4SCDTt.cjs"),_=require("../order/index.cjs");var z;class R{constructor(){s(this,z,new V.Notifier)}get changeEvent(){return t(this,z)}}z=new WeakMap;var o,d,u,D;class p extends R{constructor(e){super();s(this,o,null);s(this,d,null);s(this,u,"offsetHeight");s(this,D,e=>{const a=e.shiftKey?-1:1;let h;e.code==="Space"?h=a*t(this,d)[t(this,u)]*.4:e.code==="ArrowLeft"?h=-1*t(this,d)[t(this,u)]*.2:e.code==="ArrowRight"?h=1*t(this,d)[t(this,u)]*.2:e.code==="ArrowUp"?h=-1*t(this,d)[t(this,u)]*.2:e.code==="ArrowDown"?h=1*t(this,d)[t(this,u)]*.2:e.code==="PageUp"?h=-1*t(this,d)[t(this,u)]:e.code==="PageDown"?h=1*t(this,d)[t(this,u)]:e.code==="Home"?h=0:e.code==="End"&&(h=t(this,u)==="offsetWidth"?t(this,d).scrollWidth:t(this,d).scrollHeight),h&&(e.stopPropagation(),this.changeEvent.notify("keyboard",h))});m.isBrowser&&(i(this,o,e!=null&&e.element&&Q.getElement(e.element)||window),i(this,d,t(this,o)instanceof HTMLElement?t(this,o):document.documentElement),this.dimension=e==null?void 0:e.dimension)}set dimension(e){i(this,u,e==="width"?"offsetWidth":"offsetHeight")}connect(){m.isBrowser&&t(this,o).addEventListener("keydown",t(this,D))}disconnect(){m.isBrowser&&t(this,o).removeEventListener("keydown",t(this,D))}}o=new WeakMap,d=new WeakMap,u=new WeakMap,D=new WeakMap;var w,y,H,P,l,k,f,C,S,W,U,q,X,B;class ee extends R{constructor(e){super();s(this,C);s(this,W);s(this,w,void 0);s(this,y,void 0);s(this,H,void 0);s(this,P,void 0);s(this,l,void 0);s(this,k,void 0);s(this,f,void 0);s(this,q,void 0);s(this,X,void 0);s(this,B,void 0);this.direction=1,i(this,l,new J.Tweened(0,{easing:G.easeInQuad})),i(this,f,!1),i(this,q,a=>{t(this,l).current!==1&&this.changeEvent.notify("autoplay",a.timeBetweenFrames*t(this,w)*this.direction*(1-t(this,l).current))}),i(this,X,()=>{t(this,l).current!==1&&this.changeEvent.notify("autoplay",Math.sign(t(this,w))*this.direction*(1-t(this,l).current))}),i(this,B,()=>{t(this,y)&&(document.hidden?t(this,l).set(1,{equalize:!0}):t(this,l).set(0,{equalize:!0}))}),i(this,w,(e==null?void 0:e.speed)||1),i(this,y,(e==null?void 0:e.interval)||!1),i(this,H,e)}set interval(e){i(this,y,e),t(this,f)&&L(this,C,S).call(this)}set speed(e){i(this,w,e),t(this,f)&&L(this,C,S).call(this)}connect(){t(this,f)||(i(this,f,!0),L(this,C,S).call(this))}disconnect(){t(this,f)&&(i(this,f,!1),L(this,W,U).call(this))}pauseAndContinue(e){e&&!t(this,l).target&&(clearInterval(t(this,k)),t(this,l).set(1,{duration:Math.min(e,1e3)}),i(this,k,setTimeout(()=>{t(this,l).set(0,{duration:Math.min(e,5e3)})},e)))}}w=new WeakMap,y=new WeakMap,H=new WeakMap,P=new WeakMap,l=new WeakMap,k=new WeakMap,f=new WeakMap,C=new WeakSet,S=function(){L(this,W,U).call(this),t(this,y)?i(this,P,setInterval(t(this,X),Math.abs(t(this,w)))):M.ticker.subscribe(t(this,q),t(this,H)),document.addEventListener("visibilitychange",t(this,B))},W=new WeakSet,U=function(){clearInterval(t(this,P)),M.ticker.unsubscribe(t(this,q)),clearInterval(t(this,k)),t(this,l).close(),document.removeEventListener("visibilitychange",t(this,B))},q=new WeakMap,X=new WeakMap,B=new WeakMap;var T,E,I,Y;class te extends R{constructor(e){super();s(this,T,null);s(this,E,void 0);s(this,I,void 0);s(this,Y,e=>{let a=0;if(e.preventDefault(),!(this.axis==="x"&&Math.abs(e.deltaY)>Math.abs(e.deltaX)*.5||this.axis==="y"&&Math.abs(e.deltaX)>Math.abs(e.deltaY)*.5))if(a=(this.axis==="max"?Math.abs(e.deltaX)>Math.abs(e.deltaY)?e.deltaX:e.deltaY:this.axis==="x"?e.deltaX:e.deltaY)*this.speed,e.stopPropagation(),this.debounce){const h=Date.now();if(h-t(this,I)>40&&(a=100*Math.sign(a)),i(this,I,h),Math.abs(a)<100||t(this,E))return;this.changeEvent.notify("wheel",a),i(this,E,setTimeout(()=>{i(this,E,void 0)},80))}else this.changeEvent.notify("wheel",a)});this.axis=(e==null?void 0:e.axis)||"y",this.speed=(e==null?void 0:e.speed)||1,this.debounce=(e==null?void 0:e.debounce)||!1,i(this,I,Date.now()),m.isBrowser&&i(this,T,e!=null&&e.element&&Q.getElement(e.element)||window)}connect(){m.isBrowser&&t(this,T).addEventListener("wheel",t(this,Y),{passive:!1})}disconnect(){m.isBrowser&&(t(this,T).removeEventListener("wheel",t(this,Y)),clearTimeout(t(this,E)))}}T=new WeakMap,E=new WeakMap,I=new WeakMap,Y=new WeakMap;var x,b,A,c,K,v;const g=class g extends R{constructor(e){super();s(this,b,null);s(this,A,!1);s(this,c,0);s(this,K,e=>{if(e.composedPath().find(h=>h instanceof HTMLElement&&h.hasAttribute("drag-dead-zone")))return;this.swipe||M.ticker.unsubscribe(t(this,v));let a=e;i(this,c,0),document.documentElement.classList.add("grabbing"),Z.setupDrag(h=>{if(t(this,A)||t(g,x)&&t(g,x)!==t(this,b))return;this.swipe&&i(this,A,!0);const O=a.x-h.x,F=a.y-h.y;this.axis==="x"?i(this,c,O):i(this,c,F),a=h,(this.axis==="x"&&Math.abs(O)>Math.abs(F)||this.axis==="y"&&Math.abs(F)>Math.abs(O))&&(i(g,x,t(this,b)),this.changeEvent.notify("drag",t(this,c)))},()=>{i(g,x,null),this.swipe||(i(this,c,t(this,c)*3),M.ticker.subscribe(t(this,v),{order:_.TICK_ORDER.SCROLL-1})),document.documentElement.classList.remove("grabbing"),i(this,A,!1)})});s(this,v,()=>{Math.floor(t(this,c))||M.ticker.unsubscribe(t(this,v)),i(this,c,t(this,c)*.95),i(this,c,$.preciseNumber(t(this,c),3)),this.changeEvent.notify("drag",t(this,c))});this.axis=(e==null?void 0:e.axis)||"y",this.swipe=(e==null?void 0:e.swipe)||!1,m.isBrowser&&i(this,b,e!=null&&e.element&&Q.getElement(e.element)||document.documentElement)}connect(){m.isBrowser&&t(this,b).addEventListener("pointerdown",t(this,K))}disconnect(){m.isBrowser&&(t(this,b).removeEventListener("pointerdown",t(this,K)),M.ticker.unsubscribe(t(this,v)))}};x=new WeakMap,b=new WeakMap,A=new WeakMap,c=new WeakMap,K=new WeakMap,v=new WeakMap,s(g,x,null);let j=g;exports.AutoplayControls=ee;exports.Controls=R;exports.DragControls=j;exports.KeyboardControls=p;exports.WheelControls=te;
