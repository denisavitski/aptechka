"use strict";var v=(t,s,e)=>{if(!s.has(t))throw TypeError("Cannot "+e)};var r=(t,s,e)=>(v(t,s,"read from private field"),e?e.call(t):s.get(t)),c=(t,s,e)=>{if(s.has(t))throw TypeError("Cannot add the same private member more than once");s instanceof WeakSet?s.add(t):s.set(t,e)},h=(t,s,e,a)=>(v(t,s,"write to private field"),a?a.call(t,e):s.set(t,e),e);var d=(t,s,e)=>(v(t,s,"access private method"),e);Object.defineProperty(exports,Symbol.toStringTag,{value:"Module"});const A=require("../Store-Cr3VaD9G.cjs"),S=require("../attributes-Bf2svn4j.cjs"),q=require("../browser-CpzFX2xg.cjs"),p=require("../dom-JBOkFLTh.cjs");var i,u,n,b,o,m;class w extends A.Store{constructor(e,a,y,l){super(y,l);c(this,o);c(this,i,null);c(this,u,void 0);c(this,n,null);c(this,b,!1);h(this,u,a),q.isBrowser&&(h(this,i,p.getElement(e)),h(this,n,new MutationObserver(f=>{f.forEach(g=>{g.type==="attributes"&&g.attributeName===r(this,u)&&d(this,o,m).call(this)})})),l!=null&&l.sync&&this.subscribe(f=>{r(this,i).setAttribute(r(this,u),f.current.toString())}))}subscribe(e){return this.subscribers.size||this.observe(),super.subscribe(e)}unsubscribe(e){super.unsubscribe(e),this.subscribers.size||this.unobserve()}observe(){r(this,b)||(h(this,b,!0),r(this,n).observe(r(this,i),{attributes:!0}),d(this,o,m).call(this))}unobserve(){r(this,b)&&(h(this,b,!1),r(this,n).disconnect())}close(){super.close(),this.unobserve()}}i=new WeakMap,u=new WeakMap,n=new WeakMap,b=new WeakMap,o=new WeakSet,m=function(){const e=r(this,i).getAttribute(r(this,u));e!=null&&(this.current=S.parseAttributeValue(e))};exports.Attribute=w;
