"use strict";var L=Object.defineProperty,T=Object.defineProperties;var _=Object.getOwnPropertyDescriptors;var g=Object.getOwnPropertySymbols;var F=Object.prototype.hasOwnProperty,M=Object.prototype.propertyIsEnumerable;var y=(n,e,l)=>e in n?L(n,e,{enumerable:!0,configurable:!0,writable:!0,value:l}):n[e]=l,i=(n,e)=>{for(var l in e||(e={}))F.call(e,l)&&y(n,l,e[l]);if(g)for(var l of g(e))M.call(e,l)&&y(n,l,e[l]);return n},x=(n,e)=>T(n,_(e));var R=(n,e,l)=>{if(!e.has(n))throw TypeError("Cannot "+l)};var c=(n,e,l)=>(R(n,e,"read from private field"),l?l.call(n):e.get(n)),h=(n,e,l)=>{if(e.has(n))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(n):e.set(n,l)};const p=require("./ElementConstructor-OK-6OPjh.cjs"),D=require("./object-CCiXnER2.cjs"),j=require("./string-DhgS_iFl.cjs"),r=require("./globals-bYKki-b9.cjs");require("./Store-Cr3VaD9G.cjs");require("./ticker/index.cjs");var a,d,m,C,u;class H extends HTMLElement{constructor(l){var s;super();h(this,a,new Set);h(this,d,new Set);h(this,m,new Map);h(this,C,()=>{r.contextStack.value.unshift(c(this,m))});h(this,u,()=>{r.contextStack.value=r.contextStack.value.filter(l=>l!==c(this,m))});const o=r.currentComponentElement.value;r.currentComponentElement.value=this,c(this,C).call(this);const f=l==null?void 0:l.tag(x(i({},l.attributes),{this:this})),v=(s=r.nextComponentAttributes.value)!=null&&s.lightChildren?"lightChildren":"children";new p.ElementConstructor(this,x(i({},r.nextComponentAttributes.value),{[v]:f})),r.currentComponentElement.value=o,r.nextComponentAttributes.value=null,c(this,u).call(this)}addConnectCallback(l){c(this,a).add(l)}addDisconnectCallback(l){c(this,d).add(l)}createContext(l,o){c(this,m).set(l,o)}connectedCallback(){r.currentComponentElement.value=this,c(this,a).forEach(l=>{const o=l(this);o&&c(this,d).add(o)}),r.currentComponentElement.value=null,this.addEventListener("beforeChildrenChange",c(this,C)),this.addEventListener("afterChildrenChange",c(this,u))}disconnectedCallback(){c(this,d).forEach(l=>{l(this)}),this.removeEventListener("beforeChildrenChange",c(this,C)),this.removeEventListener("afterChildrenChange",c(this,u))}}a=new WeakMap,d=new WeakMap,m=new WeakMap,C=new WeakMap,u=new WeakMap;function A(n,e,...l){var s;l=l.flat().filter(t=>t!=null);const o=[],f=[];e=e||{},o.push(...l.reverse());const v=n==="instance";if(v&&e.from&&(n=e.from,e==null||delete e.from),typeof n=="function")if(v){let t=null;return D.isESClass(n)?t=new n:t=n(),delete e.children,()=>new p.ElementConstructor(t,e).node}else{if(e.children=o.reverse(),n===k)return k(e.children);const t={noCustomElement:n.noCustomElement,onlyRegister:e.__register};if(e==null||delete e.__register,t.noCustomElement){const q=n(i({},e));return()=>q}const w=`e-${j.camelToKebab(n.name)}`;let E=customElements.get(w);return E||(E=(s=class extends H{constructor(S){super(t.onlyRegister?{tag:n,attributes:e}:S)}},s.formAssociated=n.formAssociated,s),customElements.define(w,E)),()=>t.onlyRegister?E:new E({tag:n,attributes:e})}for(;o.length;){const t=o.pop();Array.isArray(t)?o.push(...t):t!=null&&f.push(t)}if(n==="component"){const t=k(f);return r.nextComponentAttributes.value=e,t.node}else{const t=e!=null&&e.lightChildren?"lightChildren":"children";return e==null||delete e.children,n?new p.ElementConstructor(n,x(i({},e),{[t]:f})):null}}function k(n){return new p.ElementConstructor(document.createDocumentFragment(),{children:n})}function I(n,e){const l=e==null?void 0:e.children,o=e==null?void 0:e.attributes;return A(n,i({},o),l)()}exports.Fragment=k;exports.h=A;exports.instantiate=I;
