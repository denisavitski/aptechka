"use strict";var me=(h,i,e)=>{if(!i.has(h))throw TypeError("Cannot "+e)};var t=(h,i,e)=>(me(h,i,"read from private field"),e?e.call(h):i.get(h)),a=(h,i,e)=>{if(i.has(h))throw TypeError("Cannot add the same private member more than once");i instanceof WeakSet?i.add(h):i.set(h,e)},o=(h,i,e,s)=>(me(h,i,"write to private field"),s?s.call(h,e):i.set(h,e),e);var m=(h,i,e)=>(me(h,i,"access private method"),e);const He=require("../browser-CpzFX2xg.cjs"),p=require("../Store-Cr3VaD9G.cjs"),Ke=require("../file-EevnUtRj.cjs"),Oe=require("../function-MthRj-GJ.cjs"),xe=require("../gestures-DHLrn6Q8.cjs");require("../ticker/index.cjs");const n=require("../tags-BosXYPYv.cjs"),E=require("../createStylesheet-9nksoWW0.cjs"),Ze=require("../Viewport-BBYt1Ivy.cjs"),c=require("../theme/index.cjs"),je=require("../index-CyQAdqFu.cjs"),Je=require("../events-BGwqaxVW.cjs");require("../checkbox/index.cjs");const We=require("../math-GDWEqu7y.cjs"),fe=require("../polyfills-CM4SCDTt.cjs"),Se=require("../element-resizer/index.cjs"),Ee='<svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24"><path fill-rule="evenodd" d="M20.536 3.464C19.07 2 16.714 2 12 2C7.286 2 4.929 2 3.464 3.464C2 4.93 2 7.286 2 12c0 4.714 0 7.071 1.464 8.535C4.93 22 7.286 22 12 22c4.714 0 7.071 0 8.535-1.465C22 19.072 22 16.714 22 12s0-7.071-1.465-8.536M16.75 12a.75.75 0 0 1-.75.75H9.81l1.72 1.72a.75.75 0 1 1-1.06 1.06l-3-3a.75.75 0 0 1 0-1.06l3-3a.75.75 0 1 1 1.06 1.06l-1.72 1.72H16a.75.75 0 0 1 .75.75" clip-rule="evenodd"/></svg>',Ce='<svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24"><path d="M15.24 2h-3.894c-1.764 0-3.162 0-4.255.148c-1.126.152-2.037.472-2.755 1.193c-.719.721-1.038 1.636-1.189 2.766C3 7.205 3 8.608 3 10.379v5.838c0 1.508.92 2.8 2.227 3.342c-.067-.91-.067-2.185-.067-3.247v-5.01c0-1.281 0-2.386.118-3.27c.127-.948.413-1.856 1.147-2.593c.734-.737 1.639-1.024 2.583-1.152c.88-.118 1.98-.118 3.257-.118h3.07c1.276 0 2.374 0 3.255.118A3.601 3.601 0 0 0 15.24 2Z"/><path  d="M6.6 11.397c0-2.726 0-4.089.844-4.936c.843-.847 2.2-.847 4.916-.847h2.88c2.715 0 4.073 0 4.917.847c.843.847.843 2.21.843 4.936v4.82c0 2.726 0 4.089-.843 4.936c-.844.847-2.202.847-4.917.847h-2.88c-2.715 0-4.073 0-4.916-.847c-.844-.847-.844-2.21-.844-4.936v-4.82Z"/></svg>',_e='<svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24"><path fill-rule="evenodd" d="M2 12c0-4.714 0-7.071 1.464-8.536C4.93 2 7.286 2 12 2c4.714 0 7.071 0 8.535 1.464C22 4.93 22 7.286 22 12c0 4.714 0 7.071-1.465 8.535C19.072 22 16.714 22 12 22s-7.071 0-8.536-1.465C2 19.072 2 16.714 2 12Zm10-5.75a.75.75 0 0 1 .75.75v5.19l1.72-1.72a.75.75 0 1 1 1.06 1.06l-3 3a.75.75 0 0 1-1.06 0l-3-3a.75.75 0 1 1 1.06-1.06l1.72 1.72V7a.75.75 0 0 1 .75-.75Zm-4 10a.75.75 0 0 0 0 1.5h8a.75.75 0 0 0 0-1.5H8Z" clip-rule="evenodd"/></svg>',Be='<svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24"><path fill-rule="evenodd" d="M2 12c0-4.714 0-7.071 1.464-8.536C4.93 2 7.286 2 12 2c4.714 0 7.071 0 8.535 1.464C22 4.93 22 7.286 22 12c0 4.714 0 7.071-1.465 8.535C19.072 22 16.714 22 12 22s-7.071 0-8.536-1.465C2 19.072 2 16.714 2 12Zm10 5.75a.75.75 0 0 0 .75-.75v-5.19l1.72 1.72a.75.75 0 1 0 1.06-1.06l-3-3a.75.75 0 0 0-1.06 0l-3 3a.75.75 0 1 0 1.06 1.06l1.72-1.72V17c0 .414.336.75.75.75Zm-4-10a.75.75 0 0 1 0-1.5h8a.75.75 0 0 1 0 1.5H8Z" clip-rule="evenodd"/></svg>';var L,w,S;class Xe{constructor(){a(this,L,void 0);a(this,w,void 0);a(this,S,void 0);this.scrollValue=0,o(this,L,""),o(this,w,[]),o(this,S,{}),o(this,L,p.storeRegistry.projectName+"-studio")}openPanel(i){t(this,w).includes(i)||t(this,w).push(i)}closePanel(i){o(this,w,t(this,w).filter(e=>e!==i))}isPanelOpened(i){return t(this,w).includes(i)}changedSizes(i){return t(this,S)[i]}changeSize(i,e){e?t(this,S)[i]=e:delete t(this,S)[i]}save(){const i={openedPanels:t(this,w),changedSizes:t(this,S),scrollValue:this.scrollValue};localStorage.setItem(t(this,L),JSON.stringify(i)),p.storeRegistry.saveState()}load(){p.storeRegistry.loadState();const i=localStorage.getItem(t(this,L));if(i)try{const e=JSON.parse(i);e.openedPanels&&o(this,w,e.openedPanels),e.changedSizes&&o(this,S,e.changedSizes),e.scrollValue&&(this.scrollValue=e.scrollValue)}catch(e){console.error(e)}}}L=new WeakMap,w=new WeakMap,S=new WeakMap;const f=new Xe;var T;class O extends HTMLElement{constructor(...e){super();a(this,T,void 0);o(this,T,e)}addStore(e){t(this,T).push(e)}get firstStore(){return t(this,T)[0]}get stores(){return t(this,T)}updateStores(e){t(this,T).forEach(s=>{s.current=e})}}T=new WeakMap;const Ye=E.createStylesheet({":host":{width:"100%",display:"inline-flex",height:"max-content"},"e-checkbox":{"--size":"calc(var(--height-input) * 0.8)",width:"var(--size)",height:"var(--size)",borderRadius:c.aptechkaTheme.borderRadiusSmall.var}});class ze extends O{constructor(...i){super(...i),this.attachShadow({mode:"open"}).adoptedStyleSheets.push(Ye),n.element(this,{children:[n.element("e-checkbox",{onChange:s=>{this.updateStores(s.currentTarget.checked)},ref:s=>{this.firstStore.subscribe(r=>{s.checked=r.current})}})]})}}customElements.get("e-tweaker-boolean-manager")||customElements.define("e-tweaker-boolean-manager",ze);const Ge=E.createStylesheet({":host":{width:"100%",display:"inline-flex",height:"max-content"},input:{width:"100%",height:"var(--height-input)",padding:"0",background:"none",borderRadius:c.aptechkaTheme.borderRadius.var,border:"none",blockSize:"unset"},"input::-webkit-color-swatch, input::-webkit-color-swatch-wrapper":{boxSizing:"border-box",padding:"0px",border:"none",borderRadius:c.aptechkaTheme.borderRadius.var,height:"calc(var(--height-input) * 0.93)"}});class Te extends O{constructor(...i){super(...i),this.attachShadow({mode:"open"}).adoptedStyleSheets.push(Ge),n.element(this,{children:[n.input({type:"color",value:this.firstStore,onInput:s=>{this.updateStores(s.currentTarget.value)}})]})}}customElements.get("e-tweaker-color-manager")||customElements.define("e-tweaker-color-manager",Te);const Qe=E.createStylesheet({a:{color:"inherit",fontSize:"var(--font-size-small)"}});class Re extends O{constructor(...i){var s,r;super(...i),this.attachShadow({mode:"open"}).adoptedStyleSheets.push(Qe),console.log(this.firstStore),n.element(this,{children:[n.a({href:this.firstStore,target:(r=(s=this.firstStore.passport)==null?void 0:s.manager)!=null&&r.sameWindow?"_self":"_blank",children:this.firstStore})]})}}customElements.get("e-tweaker-link-manager")||customElements.define("e-tweaker-link-manager",Re);const Ue=E.createStylesheet({":host":{width:"100%",display:"flex",alignItems:"center",gap:"var(--gap-small)"},".inputs-wrapper":{display:"grid",gap:"var(--gap-small)",width:"100%"},input:{boxSizing:"border-box",outline:"none",fontVariantNumeric:"tabular-nums",fontFamily:"inherit",color:"inherit",border:"none",fontSize:"var(--font-size-small)",width:"100%",height:"var(--height-input)",margin:"0",padding:"0 var(--gap-small)",backgroundColor:"rgba(255, 255, 255, 0.1)",borderRadius:c.aptechkaTheme.borderRadius.var},".drag":{position:"relative",width:"100%",height:"calc(var(--height-input) * 0.2)",display:"flex",alignItems:"center"},".drag::before":{content:'""',position:"absolute",left:"0",width:"100%",zIndex:"-1",height:"1px",borderBottom:`1px solid ${c.aptechkaTheme.colorFont.var}`,transform:"translateY(-50%)",opacity:"0.3"},":host(.infinite) .drag::before":{borderBottom:`1px dashed ${c.aptechkaTheme.colorFont.var}`},".drag-knob":{"--size":"calc(var(--height-input) * 0.4)",width:"var(--size)",height:"var(--size)"},".drag-knob-inner":{width:"100%",height:"100%",backgroundColor:c.aptechkaTheme.colorFont.var,borderRadius:c.aptechkaTheme.borderRadiusSmall.var,transition:"opacity var(--duration-short)"},":host(.infinite) .grabbing .drag-knob-inner":{opacity:.3}});var P,q,N,x,R,j,J,y,I,W,_,F,V,B,we,X,be,$,le,Y;class Fe extends O{constructor(...e){var r,l,d,u,k,M,Z,ke;super(...e);a(this,F);a(this,B);a(this,X);a(this,$);a(this,P,[]);a(this,q,[]);a(this,N,void 0);a(this,x,void 0);a(this,R,void 0);a(this,j,void 0);a(this,J,void 0);a(this,y,void 0);a(this,I,!1);a(this,W,e=>{const s=m(this,F,V).call(this,e);return s.map((r,l)=>{const d=typeof r=="string"?parseFloat(r)||t(this,x):r,u=We.clamp(d,t(this,x),t(this,R)),k=fe.toStep(u,t(this,N));s[l]=k}),t(this,J)==="number"?s[0]:s});a(this,_,()=>{m(this,F,V).call(this).map((e,s)=>{const r=t(this,P)[s];r&&(r.value=(e||0).toString())}),m(this,B,we).call(this)});a(this,Y,()=>{m(this,B,we).call(this)});this.attachShadow({mode:"open"}).adoptedStyleSheets.push(Ue),o(this,x,fe.nullishCoalescing((l=(r=this.firstStore.passport)==null?void 0:r.manager)==null?void 0:l.min,-1/0)),o(this,R,fe.nullishCoalescing((u=(d=this.firstStore.passport)==null?void 0:d.manager)==null?void 0:u.max,1/0)),o(this,N,((M=(k=this.firstStore.passport)==null?void 0:k.manager)==null?void 0:M.step)||.01),o(this,j,((ke=(Z=this.firstStore.passport)==null?void 0:Z.manager)==null?void 0:ke.ease)||1),o(this,J,Array.isArray(this.firstStore.current)?"array":"number"),o(this,y,isFinite(t(this,R))&&isFinite(t(this,x))),n.element(this,{class:t(this,y)?"":"infinite",children:m(this,F,V).call(this).map((Ie,oe)=>n.div({class:"inputs-wrapper",children:[n.input({type:"number",step:t(this,N),min:t(this,x),max:t(this,R),ref:C=>t(this,P).push(C),value:Ie,onChange:()=>{this.updateStores(t(this,P).map(C=>parseFloat(C.value)))}}),n.div({class:"drag",children:[n.div({class:"drag-knob",ref:C=>t(this,q).push(C),onPointerdown:C=>{C.preventDefault(),o(this,I,!0);const ue=m(this,F,V).call(this),Ve=ue[oe],z=t(this,q)[oe],qe=t(this,P)[oe];if(z&&qe){const pe=z.parentElement,Ne=m(this,X,be).call(this);pe.classList.add("grabbing"),xe.setupDrag(ge=>{const ye=ge.x-C.x,$e=t(this,y)?pe.offsetWidth/(Ne||1):1,Ae=Ve+ye/$e*t(this,j);if(ue[oe]=Ae,!t(this,y)){const De=m(this,$,le).call(this,z,0);z.style.transform=`translateX(${De+ye}px)`}this.updateStores([...ue])},()=>{if(o(this,I,!1),!t(this,y)){const ge=m(this,$,le).call(this,z,0);z.style.transition="transform 0.1s",z.style.transform=`translateX(${ge}px)`,pe.classList.remove("grabbing"),setTimeout(()=>{z.style.transition=""},100)}})}},children:n.div({class:"drag-knob-inner"})})]})]}))})}connectedCallback(){this.firstStore.addMiddleware(t(this,W)),this.firstStore.subscribe(t(this,_)),Se.elementResizer.subscribe(this,t(this,Y))}disconnectedCallback(){this.firstStore.removeMiddleware(t(this,W)),this.firstStore.unsubscribe(t(this,_)),Se.elementResizer.unsubscribe(t(this,Y))}}P=new WeakMap,q=new WeakMap,N=new WeakMap,x=new WeakMap,R=new WeakMap,j=new WeakMap,J=new WeakMap,y=new WeakMap,I=new WeakMap,W=new WeakMap,_=new WeakMap,F=new WeakSet,V=function(e=this.firstStore.current){return Array.isArray(e)?e:[e]},B=new WeakSet,we=function(){m(this,F,V).call(this).map((e,s)=>{const r=t(this,q)[s];if(r&&(!t(this,I)||t(this,I)&&t(this,y))){const l=m(this,$,le).call(this,r,e);r.style.transform=`translateX(${l}px)`}})},X=new WeakSet,be=function(){return t(this,y)?t(this,R)-t(this,x):0},$=new WeakSet,le=function(e,s){const r=e.parentElement,l=m(this,X,be).call(this),d=l?s/l:.5;return(r.offsetWidth-e.offsetWidth)*d},Y=new WeakMap;customElements.get("e-tweaker-number-manager")||customElements.define("e-tweaker-number-manager",Fe);const et=E.createStylesheet({"e-select":{display:"block",width:"100%","--arrow-color":c.aptechkaTheme.colorFont.var},"e-select-head":{width:"100%",height:"var(--height-input)",display:"flex",alignItems:"center",justifyContent:"space-between",fontSize:"var(--font-size-small)"},"e-select-option":{height:"var(--height-input)",transitionDuration:"var(--duration-short)",transitionProperty:"color",fontSize:"var(--font-size-small)"},"e-select-option:hover":{color:c.aptechkaTheme.colorActive.var},svg:{width:"16px",height:"16px",fill:c.aptechkaTheme.colorFont.var,transitionProperty:"transform",transitionDuration:"var(--duration-short)"},".opened svg":{transform:"scaleY(-1)"}});class Me extends O{constructor(...i){var r,l;super(...i),this.attachShadow({mode:"open"}).adoptedStyleSheets.push(et);const s=((l=(r=this.firstStore.passport)==null?void 0:r.manager)==null?void 0:l.variants)||[];n.element(this,{children:n.element("e-select",{value:this.firstStore,onChange:d=>{this.updateStores(d.currentTarget.value)},lightChildren:[n.element("e-select-head",{lightChildren:[n.span({"data-value-holder":""})]}),...s.map((d,u)=>n.element("e-select-option",{lightChildren:d,default:u===0?!0:null}))]})})}}customElements.get("e-tweaker-select-manager")||customElements.define("e-tweaker-select-manager",Me);const tt=E.createStylesheet({":host":{width:"100%",display:"flex",alignItems:"center"},input:{boxSizing:"border-box",outline:"none",fontVariantNumeric:"tabular-nums",fontFamily:"inherit",color:"inherit",border:"none",fontSize:"var(--font-size-small)",height:"var(--height-input)",width:"100%",margin:"0",padding:"0 var(--gap-small)",backgroundColor:"rgba(255, 255, 255, 0.1)",borderRadius:c.aptechkaTheme.borderRadius.var}});class Le extends O{constructor(...i){super(...i),this.attachShadow({mode:"open"}).adoptedStyleSheets.push(tt),n.element(this,{children:[n.input({class:"text-input",type:"string",value:this.firstStore,onChange:s=>{this.updateStores(s.currentTarget.value)}})]})}}customElements.get("e-tweaker-string-manager")||customElements.define("e-tweaker-string-manager",Le);const st={boolean:ze,color:Te,link:Re,number:Fe,select:Me,string:Le},rt=E.createStylesheet({":host":{display:"grid",gridAutoFlow:"column",gridTemplateColumns:"0.5fr 1fr",alignItems:"center",color:c.aptechkaTheme.colorFont.var,gap:"var(--gap-medium)"},":host(.disabled)":{pointerEvents:"none",opacity:.5},".head":{fontSize:"var(--font-size-medium)",display:"flex",alignItems:"center",gap:"var(--gap-extra-small)"},".head-buttons":{display:"flex"},".head-button":{width:"14px",height:"14px",padding:"0",margin:"0",border:"none",background:"none",fill:c.aptechkaTheme.colorFont.var,transitionDuration:"var(--duration-short)",transitionProperty:"fill, opacity",opacity:"0"},":host(:hover) .head-button":{opacity:"1"},".head-button:hover":{fill:c.aptechkaTheme.colorActive.var},".head-button svg":{width:"100%",height:"100%"}});var b,A,D,H,K,G,Q;class ve extends HTMLElement{constructor(e){var l,d,u,k;super();a(this,b,[]);a(this,A,void 0);a(this,D,void 0);a(this,H,!1);a(this,K,void 0);a(this,G,()=>{p.activeStores.current.find(e=>t(this,b).includes(e))||this.remove()});a(this,Q,e=>{t(this,H)&&((e.metaKey||e.ctrlKey)&&e.code==="KeyC"?navigator.clipboard.writeText(t(this,b)[0].current):(e.metaKey||e.ctrlKey)&&e.code==="KeyR"&&(t(this,b).forEach(s=>{s.reset()}),e.preventDefault()))});o(this,b,[e.store]),o(this,A,e.store.passport.name),o(this,D,t(this,A).split(".").slice(-1).toString());const s=((d=(l=e.store.passport)==null?void 0:l.manager)==null?void 0:d.type)||"string";o(this,K,new st[s](t(this,b)[0])),this.attachShadow({mode:"open"}).adoptedStyleSheets.push(rt),n.element(this,{class:{disabled:((k=(u=e.store.passport)==null?void 0:u.manager)==null?void 0:k.disabled)||!1},onPointerleave:()=>{o(this,H,!1)},onPointerenter:()=>{o(this,H,!0)},children:[n.div({class:"head",children:[n.div({class:"name",children:t(this,D)+":"}),n.div({class:"head-buttons",children:[n.button({class:"head-button",children:Ce,onClick:()=>{navigator.clipboard.writeText(t(this,b)[0].current)}}),n.button({class:"head-button",children:Ee,onClick:()=>{t(this,b).forEach(M=>{M.reset()})}})]})]}),t(this,K)]})}get key(){return t(this,A)}get name(){return t(this,D)}get stores(){return t(this,b)}addStore(e){t(this,K).addStore(e)}connectedCallback(){p.activeStores.subscribe(t(this,G)),addEventListener("keydown",t(this,Q)),Je.dispatchSizeChangeEvent(this)}disconnectedCallback(){p.activeStores.unsubscribe(t(this,G)),removeEventListener("keydown",t(this,Q))}}b=new WeakMap,A=new WeakMap,D=new WeakMap,H=new WeakMap,K=new WeakMap,G=new WeakMap,Q=new WeakMap;customElements.get("e-tweaker-field")||customElements.define("e-tweaker-field",ve);const it=E.createStylesheet({".wrapper":{boxSizing:"border-box",backgroundColor:"rgba(255, 255, 255, 0.1)",borderRadius:c.aptechkaTheme.borderRadius.var},".head":{boxSizing:"border-box",width:"100%",height:"var(--tweaker-folder-height)",paddingLeft:"var(--gap-medium)",paddingRight:"var(--gap-medium)",display:"flex",alignItems:"center",justifyContent:"space-between",backgroundColor:c.aptechkaTheme.colorMainAux.var,borderRadius:c.aptechkaTheme.borderRadius.var},".name":{fontSize:"var(--font-size-large)",color:c.aptechkaTheme.colorFont.var},".body":{display:"none",overflow:"hidden","@supports (height: calc-size(auto))":{height:"0"}},":host(.transition-allowed) .body":{transition:"height var(--duration-short), display var(--duration-short) allow-discrete"},":host(.opened) .body":{height:"calc-size(auto)",display:"block","@starting-style":{height:"0"}},".body-content":{boxSizing:"border-box",padding:"var(--gap-large)",display:"grid",gap:"var(--gap-medium)"},".arrow":{width:"20px",height:"20px",fill:c.aptechkaTheme.colorFont.var,transition:"transform var(--duration-short)"},".opened .arrow":{transform:"scaleY(-1)"}});var v,U,g,ee,te,se,re,ce;const de=class de extends HTMLElement{constructor(e){super();a(this,v,void 0);a(this,U,new p.Store(null));a(this,g,new p.Store([]));a(this,ee,void 0);a(this,te,null);a(this,se,null);a(this,re,null);a(this,ce,e=>{let s=[],r=[];e.forEach(l=>{s=[...s,...l.removedNodes],r=[...r,...l.addedNodes]}),t(this,g).current=t(this,g).current.filter(l=>!s.includes(l)),t(this,v)&&!t(this,g).current.length&&!r.length&&this.remove()});this.attachShadow({mode:"open"}).adoptedStyleSheets.push(it),o(this,v,e.key),o(this,ee,new MutationObserver(t(this,ce))),n.element(this,{children:[n.div({class:"wrapper",children:[n.div({class:"head",onClick:r=>{this.classList.toggle("opened"),this.classList.contains("opened")?f.openPanel(t(this,v)):f.closePanel(t(this,v))},children:[t(this,v)?n.div({class:"name",children:[t(this,v).split(".").slice(-1).toString()]}):null,t(this,U),n.element(je.arrowIcon,{class:"arrow"})]}),n.div({class:"body",ref:r=>{o(this,te,r)},children:n.div({class:"body-content",children:t(this,g),ref:r=>{o(this,se,r),o(this,re,r.firstElementChild)}})})]})]}),e!=null&&e.storeBox&&this.handleStore(e.storeBox)}get key(){return t(this,v)}get head(){return t(this,U)}get content(){return t(this,g)}get bodyElement(){return t(this,te)}get contentElement(){return t(this,se)}connectedCallback(){f.isPanelOpened(t(this,v))&&this.classList.add("opened"),setTimeout(()=>{this.classList.add("transition-allowed")}),t(this,ee).observe(t(this,re),{childList:!0})}handleStore(e){if(e.remainingFolders.length){const r=e.store.passport.name.split("."),l=r.slice(0,r.length-e.remainingFolders.length).join("."),d=t(this,g).current.find(u=>u.key===l);d instanceof de?d.handleStore({store:e.store,remainingFolders:e.remainingFolders.slice(1)}):t(this,g).current=[...t(this,g).current,new de({key:l,storeBox:{store:e.store,remainingFolders:e.remainingFolders.slice(1)}})]}else{const s=t(this,g).current.find(r=>r.key===e.store.passport.name);s instanceof ve?s.addStore(e.store):t(this,g).current=[...t(this,g).current,new ve({store:e.store})]}}};v=new WeakMap,U=new WeakMap,g=new WeakMap,ee=new WeakMap,te=new WeakMap,se=new WeakMap,re=new WeakMap,ce=new WeakMap;let he=de;customElements.get("e-tweaker-folder")||customElements.define("e-tweaker-folder",he);const nt=E.createStylesheet({":host":{"--tweaker-width":"550px","--tweaker-offset":"20px","--tweaker-folder-height":"35px","--height-input":"25px","--gap-large":"12px","--gap-medium":"10px","--gap-small":"8px","--gap-extra-small":"4px","--font-size-large":"16px","--font-size-medium":"14px","--font-size-small":"12px","--duration-short":"0.2s",fontFamily:"sans-serif",position:"absolute",top:"var(--tweaker-offset)",right:"var(--tweaker-offset)",width:"var(--tweaker-width)",backgroundColor:c.aptechkaTheme.colorMain.var,borderRadius:c.aptechkaTheme.borderRadius.var,transition:"opacity 0.1s",zIndex:"100",opacity:"0.1"},":host(:hover)":{opacity:"1 !important"},".resize":{position:"absolute",left:"0",top:"0",width:"calc(var(--tweaker-width) * 0.025)",height:"100%",zIndex:"1",cursor:"ew-resize"},".tweaker-buttons":{display:"flex",alignItems:"center",gap:"var(--gap-extra-small)"},".tweaker-button":{width:"18px",height:"18px",padding:"0",margin:"0",background:"none",border:"none",fill:c.aptechkaTheme.colorFont.var,transitionProperty:"fill",transitionDuration:"var(--duration-short)"},".tweaker-button:hover":{fill:c.aptechkaTheme.colorActive.var},".tweaker-button svg":{width:"100%",height:"100%"},":host .body-content":{maxHeight:`calc(
      100dvh - 
      (
        var(--tweaker-offset) * 2 + 
        var(--tweaker-folder-height)
      )
    )`,overflow:"hidden auto","-ms-overflow-style":"none","scrollbar-width":"none"},":host .body-content::-webkit-scrollbar":{display:"none"},[`@media ${Ze.ViewportMediaRules["<=mobile"]}`]:{":host":{position:"absolute",top:"0",right:"0",width:"100% !important",borderTopLeftRadius:"0",borderTopRightRadius:"0"},":host .body-content":{maxHeight:`calc(
        100dvh - 
        var(--tweaker-folder-height)
      )`}}});var ie,ne,ae;class Pe extends he{constructor(){super({key:""});a(this,ie,!1);a(this,ne,()=>{f.save()});a(this,ae,Oe.debounce(()=>{p.activeStores.current.forEach(e=>{var s;if(e.passport&&!((s=e.passport.manager)!=null&&s.invisible)){const r=e.passport.name.split(".");this.handleStore({store:e,remainingFolders:r.length>1?r.slice(0,-1):[]})}}),t(this,ie)||(o(this,ie,!0),this.contentElement.scroll({top:f.scrollValue}),this.contentElement.addEventListener("scroll",()=>{f.scrollValue=this.contentElement.scrollTop}))},10));f.load(),this.shadowRoot.adoptedStyleSheets.push(nt),this.head.current=[n.div({class:"tweaker-buttons",onClick:e=>{e.stopPropagation()},children:[n.button({class:"tweaker-button",children:Ee,onClick:()=>{p.storeRegistry.resetState()}}),n.button({class:["tweaker-button"],children:[Ce],onClick:()=>{navigator.clipboard.writeText(JSON.stringify(p.storeRegistry.getState()))}}),n.button({class:"tweaker-button",children:_e,onClick:()=>{Ke.createJSONAndSave(p.storeRegistry.projectName,p.storeRegistry.getState())}}),n.label({class:"tweaker-button",children:[Be,n.input({type:"file",style:{display:"none"},onChange:e=>{var l;const r=(l=e.currentTarget.files)==null?void 0:l[0];if(r){const d=new FileReader;d.onload=u=>{var M,Z;const k=(Z=(M=u.target)==null?void 0:M.result)==null?void 0:Z.toString();k&&p.storeRegistry.loadState(k)},d.readAsText(r)}}})]})]})],n.element(this.bodyElement,{children:[n.div({class:"resize",onPointerdown:e=>{e.preventDefault();const s=this.getBoundingClientRect(),r=this.contentElement.scrollTop;xe.setupDrag(l=>{const d=e.x-l.x,u=Math.max(400,s.width+d);this.style.width=u+"px",f.changeSize("tweaker",u)},()=>{setTimeout(()=>{this.contentElement.scroll({top:r})},10)})},onDblclick:()=>{this.style.width="",f.changeSize("tweaker",null)}})]})}connectedCallback(){super.connectedCallback(),window.addEventListener("beforeunload",t(this,ne)),p.activeStores.subscribe(t(this,ae)),f.changedSizes("tweaker")&&(this.style.width=f.changedSizes("tweaker")+"px")}disconnectedCallback(){window.removeEventListener("beforeunload",t(this,ne)),f.save(),p.activeStores.unsubscribe(t(this,ae))}}ie=new WeakMap,ne=new WeakMap,ae=new WeakMap;customElements.get("e-tweaker")||customElements.define("e-tweaker",Pe);He.isBrowser&&document.body.appendChild(new Pe);
