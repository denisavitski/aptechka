"use strict";var h=(r,t,s)=>{if(!t.has(r))throw TypeError("Cannot "+s)};var n=(r,t,s)=>(h(r,t,"read from private field"),s?s.call(r):t.get(r)),b=(r,t,s)=>{if(t.has(r))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(r):t.set(r,s)},f=(r,t,s,e)=>(h(r,t,"write to private field"),e?e.call(r,s):t.set(r,s),s);Object.defineProperty(exports,Symbol.toStringTag,{value:"Module"});const z=require("../browser-CpzFX2xg.cjs"),d=require("../dom-JBOkFLTh.cjs");var i,o,u;class y{constructor(){b(this,i,[]);b(this,o,null);b(this,u,t=>{n(this,i).map(e=>({subscriber:e,entry:t.find(l=>l.target===e.element)})).forEach(e=>{e.entry&&(e.subscriber.entry=e.entry,e.subscriber.callback(e.entry))})});z.isBrowser&&window.ResizeObserver&&f(this,o,new ResizeObserver(n(this,u)))}subscribe(t,s){const e=d.getElement(t);if(!e)return()=>{};const l=n(this,i).find(c=>c.element===e);if(!l)n(this,o).observe(e);else{const c=n(this,i).find(m=>m.element===e&&m.entry);c!=null&&c.element.isConnected&&s(c.entry)}return n(this,i).push({element:e,callback:s,entry:(l==null?void 0:l.entry)||null}),()=>{this.unsubscribe(s)}}unsubscribe(t){const s=n(this,i).find(e=>e.callback===t);s&&(f(this,i,n(this,i).filter(e=>e.callback!==s.callback)),n(this,i).find(e=>e.element===s.element)||n(this,o).unobserve(s.element))}}i=new WeakMap,o=new WeakMap,u=new WeakMap;const w=new y;exports.ElementResizer=y;exports.elementResizer=w;
